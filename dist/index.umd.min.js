/*!
 * @dimkk/pg-worker2 v0.0.0
 * (c) [authorFullName]
 * Released under the MIT License.
 */
/*!
 * @dimkk/pg-worker2 v0.0.0
 * (c) [authorFullName]
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("events"),require("util"),require("crypto"),require("path"),require("fs"),require("stream"),require("string_decoder"),require("dns"),require("url"),require("net"),require("assert"),require("tls"),require("pg-native"),require("os"),require("buffer"),require("zlib"),require("tty"),require("http"),require("https")):"function"==typeof define&&define.amd?define(["exports","events","util","crypto","path","fs","stream","string_decoder","dns","url","net","assert","tls","pg-native","os","buffer","zlib","tty","http","https"],t):t((e=e||self)["[libraryCammelCaseName]"]={},e.events,e.util$4,e.crypto,e.path,e.fs,e.stream$3,e.string_decoder$2,e.dns,e.url,e.net,e.assert,e.tls,e.pgNative,e.os,e.buffer,e.zlib,e.tty$1,e.http,e.https)}(this,(function(e,t,r,n,i,s,o,a,l,u,c,h,f,d,p,g,m,b,y,v){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h,f=f&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,g=g&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g,m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m,b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b,y=y&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y,v=v&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v;var w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function S(e,t){return e(t={exports:{}},t.exports),t.exports}function E(e){return e&&e.default||e}class M{constructor(e,t){this.source=e,this.transform=t||x,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof();){if("="===this.nextCharacter().value)break}}parse(e){var t,r,n;for(this.consumeDimensions();!this.isEof();)if("{"!==(t=this.nextCharacter()).value||n){if("}"!==t.value||n)'"'!==t.value||t.escaped?","!==t.value||n?this.record(t.value):this.newEntry():(n&&this.newEntry(!0),n=!n);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(r=new M(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}}function x(e){return e}var k=function(e,t){return new M(e,t).parse()},R={create:function(e,t){return{parse:function(){return k(e,t)}}}},O=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,C=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,T=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,P=/^-?infinity$/,j=function(e){if(P.test(e))return Number(e.replace("i","I"));var t=O.exec(e);if(!t)return function(e){var t=C.exec(e);if(!t)return;var r=parseInt(t[1],10);t[4]&&(r=A(r));var n=parseInt(t[2],10)-1,i=t[3],s=new Date(r,n,i);I(r)&&s.setFullYear(r);return s}(e)||null;var r=!!t[8],n=parseInt(t[1],10);r&&(n=A(n));var i,s=parseInt(t[2],10)-1,o=t[3],a=parseInt(t[4],10),l=parseInt(t[5],10),u=parseInt(t[6],10),c=t[7];c=c?1e3*parseFloat(c):0;var h=function(e){var t=T.exec(e.split(" ")[1]);if(!t)return;var r=t[1];if("Z"===r)return 0;var n="-"===r?-1:1;return(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*n*1e3}(e);return null!=h?(i=new Date(Date.UTC(n,s,o,a,l,u,c)),I(n)&&i.setUTCFullYear(n),i.setTime(i.getTime()-h)):(i=new Date(n,s,o,a,l,u,c),I(n)&&i.setFullYear(n)),i};function A(e){return-(e-1)}function I(e){return e>=0&&e<100}var N=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)L.call(r,n)&&(e[n]=r[n])}return e},L=Object.prototype.hasOwnProperty;var D=q;function q(e){if(!(this instanceof q))return new q(e);N(this,function(e){if(!e)return{};var t=$.exec(e),r="-"===t[8];return Object.keys(W).reduce((function(e,n){var i,s,o=t[W[n]];return o&&(o="milliseconds"===n?(s=(i=o)+"000000".slice(i.length),parseInt(s,10)/1e3):parseInt(o,10))?(r&&~z.indexOf(n)&&(o*=-1),e[n]=o,e):e}),{})}(e))}var B=["seconds","minutes","hours","days","months","years"];q.prototype.toPostgres=function(){var e=B.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),0===e.length?"0":e.map((function(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),t+" "+e}),this).join(" ")};var F={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},Q=["years","months","days"],U=["hours","minutes","seconds"];q.prototype.toISOString=q.prototype.toISO=function(){return"P"+Q.map(e,this).join("")+"T"+U.map(e,this).join("");function e(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),t+F[e]}};var $=new RegExp(["([+-]?\\d+)\\s+years?","([+-]?\\d+)\\s+mons?","([+-]?\\d+)\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map((function(e){return"("+e+")?"})).join("\\s*")),W={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},z=["hours","minutes","seconds","milliseconds"];var G=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var t="",r=0;r<e.length;)if("\\"!==e[r])t+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))t+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var n=1;r+n<e.length&&"\\"===e[r+n];)n++;for(var i=0;i<Math.floor(n/2);++i)t+="\\";r+=2*Math.floor(n/2)}return new Buffer(t,"binary")};function H(e){return function(t){return null===t?t:e(t)}}function V(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function Y(e){return e?k(e,V):null}function K(e){return parseInt(e,10)}function J(e){return e?k(e,H(K)):null}function X(e){return e?k(e,H((function(e){return oe(e).trim()}))):null}var Z=function(e){return e?R.create(e,(function(e){return null!==e&&(e=le(e)),e})).parse():null},ee=function(e){return e?R.create(e,(function(e){return null!==e&&(e=parseFloat(e)),e})).parse():null},te=function(e){return e?R.create(e).parse():null},re=function(e){return e?R.create(e,(function(e){return null!==e&&(e=j(e)),e})).parse():null},ne=function(e){return e?R.create(e,(function(e){return null!==e&&(e=D(e)),e})).parse():null},ie=function(e){return e?k(e,H(G)):null},se=function(e){return parseInt(e,10)},oe=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},ae=function(e){return e?k(e,H(JSON.parse)):null},le=function(e){return"("!==e[0]?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},ue=function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",n=!1,i=2;i<e.length-1;i++)n||(t+=e[i]),")"!==e[i]?n&&","!==e[i]&&(r+=e[i]):n=!0;var s=le(t);return s.radius=parseFloat(r),s},ce=1e6;var he=function(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),n="";t<0&&(t=~t+(0===r),r=1+~r>>>0,n="-");var i,s,o,a,l,u,c="";if(i=t%ce,t=t/ce>>>0,o=""+((s=4294967296*i+r)-ce*(r=s/ce>>>0)),0===r&&0===t)return n+o+c;for(a="",l=6-o.length,u=0;u<l;u++)a+="0";if(c=a+o+c,i=t%ce,t=t/ce>>>0,o=""+((s=4294967296*i+r)-ce*(r=s/ce>>>0)),0===r&&0===t)return n+o+c;for(a="",l=6-o.length,u=0;u<l;u++)a+="0";if(c=a+o+c,i=t%ce,t=t/ce>>>0,o=""+((s=4294967296*i+r)-ce*(r=s/ce>>>0)),0===r&&0===t)return n+o+c;for(a="",l=6-o.length,u=0;u<l;u++)a+="0";return c=a+o+c,n+(o=""+(s=4294967296*(i=t%ce)+r)%ce)+c},fe=function(e,t,r,n,i){n=n||!1,i=i||function(e,t,r){return e*Math.pow(2,r)+t};var s=(r=r||0)>>3,o=function(e){return n?255&~e:e},a=255,l=8-r%8;t<l&&(a=255<<8-t&255,l=t),r&&(a>>=r%8);var u=0;r%8+t>=8&&(u=i(0,o(e[s])&a,l));for(var c=t+r>>3,h=s+1;h<c;h++)u=i(u,o(e[h]),8);var f=(t+r)%8;return f>0&&(u=i(u,o(e[c])>>8-f,f)),u},de=function(e,t,r){var n=Math.pow(2,r-1)-1,i=fe(e,1),s=fe(e,r,1);if(0===s)return 0;var o=1,a=fe(e,t,r+1,!1,(function(e,t,r){0===e&&(e=1);for(var n=1;n<=r;n++)o/=2,(t&1<<r-n)>0&&(e+=o);return e}));return s==Math.pow(2,r+1)-1?0===a?0===i?1/0:-1/0:NaN:(0===i?1:-1)*Math.pow(2,s-n)*a},pe=function(e){return 1==fe(e,1)?-1*(fe(e,15,1,!0)+1):fe(e,15,1)},ge=function(e){return 1==fe(e,1)?-1*(fe(e,31,1,!0)+1):fe(e,31,1)},me=function(e){return de(e,23,8)},be=function(e){return de(e,52,11)},ye=function(e){var t=fe(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,fe(e,16,16)),n=0,i=fe(e,16),s=0;s<i;s++)n+=fe(e,16,64+16*s)*r,r/=1e4;var o=Math.pow(10,fe(e,16,48));return(0===t?1:-1)*Math.round(n*o)/o},ve=function(e,t){var r=fe(t,1),n=fe(t,63,1),i=new Date((0===r?1:-1)*n/1e3+9466848e5);return e||i.setTime(i.getTime()+6e4*i.getTimezoneOffset()),i.usec=n%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(e){this.usec=e},i.getUTCMicroSeconds=function(){return this.usec},i},we=function(e){for(var t=fe(e,32),r=(fe(e,32,32),fe(e,32,64)),n=96,i=[],s=0;s<t;s++)i[s]=fe(e,32,n),n+=32,n+=32;var o=function(t){var r,i=fe(e,32,n);return n+=32,4294967295==i?null:23==t||20==t?(r=fe(e,8*i,n),n+=8*i,r):25==t?r=e.toString(this.encoding,n>>3,(n+=i<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},a=function(e,t){var r,n=[];if(e.length>1){var i=e.shift();for(r=0;r<i;r++)n[r]=a(e,t);e.unshift(i)}else for(r=0;r<e[0];r++)n[r]=o(t);return n};return a(i,r)},_e=function(e){return e.toString("utf8")},Se=function(e){return null===e?null:fe(e,8)>0},Ee=function(e){e(20,he),e(21,pe),e(23,ge),e(26,ge),e(1700,ye),e(700,me),e(701,be),e(16,Se),e(1114,ve.bind(null,!1)),e(1184,ve.bind(null,!0)),e(1e3,we),e(1007,we),e(1016,we),e(1008,we),e(1009,we),e(25,_e)},Me=function(e,t){if(!Oe[t=t||"text"])return Ce;return Oe[t][e]||Ce},xe=function(e,t,r){"function"==typeof t&&(r=t,t="text");Oe[t][e]=r},ke=R,Re={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096},Oe={text:{},binary:{}};function Ce(e){return String(e)}(function(e){e(20,oe),e(21,se),e(23,se),e(26,se),e(700,parseFloat),e(701,parseFloat),e(16,V),e(1082,j),e(1114,j),e(1184,j),e(600,le),e(651,te),e(718,ue),e(1e3,Y),e(1001,ie),e(1005,J),e(1007,J),e(1028,J),e(1016,X),e(1017,Z),e(1021,ee),e(1022,ee),e(1231,ee),e(1014,te),e(1015,te),e(1008,te),e(1009,te),e(1040,te),e(1041,te),e(1115,re),e(1182,re),e(1185,re),e(1186,D),e(1187,ne),e(17,G),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,ae),e(3807,ae),e(3907,te),e(2951,te),e(791,te),e(1183,te),e(1270,te)})((function(e,t){Oe.text[e]=t})),Ee((function(e,t){Oe.binary[e]=t}));var Te={getTypeParser:Me,setTypeParser:xe,arrayParser:ke,builtins:Re},Pe=S((function(e){e.exports={host:"localhost",user:"win32"===process.platform?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var t=Te.getTypeParser(20,"text"),r=Te.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",(function(e){Te.setTypeParser(20,"text",e?Te.getTypeParser(23,"text"):t),Te.setTypeParser(1016,"text",e?Te.getTypeParser(1007,"text"):r)}))}));Pe.host,Pe.user,Pe.database,Pe.password,Pe.connectionString,Pe.port,Pe.rows,Pe.binary,Pe.max,Pe.idleTimeoutMillis,Pe.client_encoding,Pe.ssl,Pe.application_name,Pe.fallback_application_name,Pe.options,Pe.parseInputDatesAsUTC,Pe.statement_timeout,Pe.idle_in_transaction_session_timeout,Pe.query_timeout,Pe.connect_timeout,Pe.keepalives,Pe.keepalives_idle;var je=function(e,t){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){var r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?Pe.parseInputDatesAsUTC?function(e){var t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);var n=Ae(t,4)+"-"+Ae(e.getUTCMonth()+1,2)+"-"+Ae(e.getUTCDate(),2)+"T"+Ae(e.getUTCHours(),2)+":"+Ae(e.getUTCMinutes(),2)+":"+Ae(e.getUTCSeconds(),2)+"."+Ae(e.getUTCMilliseconds(),3);n+="+00:00",r&&(n+=" BC");return n}(e):function(e){var t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var i=Ae(r,4)+"-"+Ae(e.getMonth()+1,2)+"-"+Ae(e.getDate(),2)+"T"+Ae(e.getHours(),2)+":"+Ae(e.getMinutes(),2)+":"+Ae(e.getSeconds(),2)+"."+Ae(e.getMilliseconds(),3);t<0?(i+="-",t*=-1):i+="+";i+=Ae(Math.floor(t/60),2)+":"+Ae(t%60,2),n&&(i+=" BC");return i}(e):Array.isArray(e)?function e(t){for(var r="{",n=0;n<t.length;n++)n>0&&(r+=","),null===t[n]||void 0===t[n]?r+="NULL":Array.isArray(t[n])?r+=e(t[n]):t[n]instanceof Buffer?r+="\\\\x"+t[n].toString("hex"):r+='"'+je(t[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"';return r+="}"}(e):null==e?null:"object"==typeof e?function(e,t){if(e&&"function"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),je(e.toPostgres(je),t)}return JSON.stringify(e)}(e,t):e.toString()};function Ae(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}const Ie=function(e){return n.createHash("md5").update(e,"utf-8").digest("hex")};var Ne={prepareValue:function(e){return je(e)},normalizeQueryConfig:function(e,t,r){return e="string"==typeof e?{text:e}:e,t&&("function"==typeof t?e.callback=t:e.values=t),r&&(e.callback=r),e},postgresMd5PasswordHash:function(e,t,r){var n=Ie(t+e);return"md5"+Ie(Buffer.concat([Buffer.from(n),r]))},md5:Ie};function Le(e,t){Buffer.isBuffer(e)||(e=Buffer.from(e)),Buffer.isBuffer(t)||(t=Buffer.from(t));var r=[];if(e.length>t.length)for(var n=0;n<t.length;n++)r.push(e[n]^t[n]);else for(var i=0;i<e.length;i++)r.push(e[i]^t[i]);return Buffer.from(r)}function De(e,t){return n.createHmac("sha256",e).update(t).digest()}var qe={startSession:function(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");const t=n.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:t,response:"n,,n=*,r="+t,message:"SASLInitialResponse"}},continueSession:function(e,t,r){if("SASLInitialResponse"!==e.message)throw new Error("SASL: Last message was not SASLInitialResponse");const i=function(e){var t,r,n;if(String(e).split(",").forEach((function(e){switch(e[0]){case"r":t=e.substr(2);break;case"s":r=e.substr(2);break;case"i":n=parseInt(e.substr(2),10)}})),!t)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");if(!r)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");if(!n)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:t,salt:r,iteration:n}}(r);if(!i.nonce.startsWith(e.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var s=function(e,t,r){for(var n=De(e,Buffer.concat([t,Buffer.from([0,0,0,1])])),i=n,s=0;s<r-1;s++)n=De(e,n),i=Le(i,n);return i}(t,Buffer.from(i.salt,"base64"),i.iteration),o=De(s,"Client Key"),a=n.createHash("sha256").update(o).digest(),l="n=*,r="+e.clientNonce,u="r="+i.nonce+",s="+i.salt+",i="+i.iteration,c="c=biws,r="+i.nonce,h=l+","+u+","+c,f=Le(o,De(a,h)).toString("base64"),d=De(s,"Server Key"),p=De(d,h);e.message="SASLResponse",e.serverSignature=p.toString("base64"),e.response=c+",p="+f},finalizeSession:function(e,t){if("SASLResponse"!==e.message)throw new Error("SASL: Last message was not SASLResponse");var r;if(String(t).split(",").forEach((function(e){switch(e[0]){case"v":r=e.substr(2)}})),r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}},Be=S((function(e,t){function r(e,t,r){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var n=!1,i=!1,s=[],a=!1,l=new o;function u(){for(;s.length&&!l.paused;){var e=s.shift();if(null===e)return l.emit("end");l.emit("data",e)}}function c(){l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy()}return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(r&&!1===r.autoDestroy),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return a||(null===e&&(a=!0),s.push(e),u()),l},l.on("end",(function(){l.readable=!1,!l.writable&&l.autoDestroy&&process.nextTick((function(){l.destroy()}))})),l.end=function(e){if(!n)return n=!0,arguments.length&&l.write(e),c(),l},l.destroy=function(){if(!i)return i=!0,n=!0,s.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),u(),l.paused||l.emit("drain"),l},l}e.exports=r,r.through=r})),Fe=a.StringDecoder,Qe=function(e,t,r){var n=new Fe,i="",s=r&&r.maxLength,o=!r||!1!==r.trailing;"function"==typeof e&&(t=e,e=null);e||(e=/\r?\n/);function a(e,r){if(t){try{r=t(r)}catch(t){return e.emit("error",t)}void 0!==r&&e.queue(r)}else e.queue(r)}function l(t,r){var n=((null!=i?i:"")+r).split(e);if(i=n.pop(),s&&i.length>s)return t.emit("error",new Error("maximum buffer reached"));for(var o=0;o<n.length;o++){a(t,n[o])}}return Be((function(e){l(this,n.write(e))}),(function(){n.end&&l(this,n.end()),o&&null!=i&&a(this,i),this.queue(null)}))};var Ue=S((function(e){var t=o.Stream,n="win32"===process.platform,s=process.stderr;var a=["host","port","database","user","password"],l=a.length,u=a[l-1];function c(){var e=s instanceof t&&!0===s.writable;if(e){var n=Array.prototype.slice.call(arguments).concat("\n");s.write(r.format.apply(r,n))}}Object.defineProperty(e.exports,"isWin",{get:function(){return n},set:function(e){n=e}}),e.exports.warnTo=function(e){var t=s;return s=e,t},e.exports.getFileName=function(e){return(e=e||process.env).PGPASSFILE||(n?i.join(e.APPDATA,"postgresql","pgpass.conf"):i.join(e.HOME,".pgpass"))},e.exports.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")&&(!!n||(t=t||"<unkn>",32768!=(61440&e.mode)?(c('WARNING: password file "%s" is not a plain file',t),!1):!(63&e.mode)||(c('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1)))};var h=e.exports.match=function(e,t){return a.slice(0,-1).reduce((function(r,n,i){return 1==i&&Number(e[n]||5432)===Number(t[n])?r&&!0:r&&("*"===t[n]||t[n]===e[n])}),!0)};e.exports.getPassword=function(e,t,r){var n,i=t.pipe(new Qe);var s=function(e){t.destroy(),c("WARNING: error on reading file: %s",e),r(void 0)};t.on("error",s),i.on("data",(function(t){var r=f(t);r&&d(r)&&h(e,r)&&(n=r[u],i.end())})).on("end",(function(){t.destroy(),r(n)})).on("error",s)};var f=e.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,i=0,s={},o=function(t,r,n){var i=e.substring(r,n);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(i=i.replace(/\\([:\\])/g,"$1")),s[a[t]]=i},u=0;u<e.length-1;u+=1){if(t=e.charAt(u+1),r=e.charAt(u),n==l-1){o(n,i);break}u>=0&&":"==t&&"\\"!==r&&(o(n,i,u+1),i=u+2,n+=1)}return s=Object.keys(s).length===l?s:null},d=e.exports.isValidEntry=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return"*"===e||(e=Number(e),isFinite(e)&&e>0&&e<9007199254740992&&Math.floor(e)===e)},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},r=0;r<a.length;r+=1){if(!(0,t[r])(e[a[r]]||""))return!1}return!0}})),$e=(Ue.warnTo,Ue.getFileName,Ue.usePgPass,Ue.match,Ue.getPassword,Ue.parseLine,Ue.isValidEntry,function(e,t){var r=Ue.getFileName();s.stat(r,(function(n,i){if(n||!Ue.usePgPass(i,r))return t(void 0);var o=s.createReadStream(r);Ue.getPassword(e,o,t)}))}),We=Ue.warnTo;function ze(e){this._types=e||Te,this.text={},this.binary={}}$e.warnTo=We,ze.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},ze.prototype.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text"),this.getOverrides(t)[e]=r},ze.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)};var Ge=ze;function He(e){if("/"===e.charAt(0))return{host:(r=e.split(" "))[0],database:r[1]};var t=u.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),r=t.query;for(var n in r)Array.isArray(r[n])&&(r[n]=r[n][r[n].length-1]);var i=(t.auth||":").split(":");if(r.user=i[0],r.password=i.splice(1).join(":"),r.port=t.port,"socket:"==t.protocol)return r.host=decodeURI(t.pathname),r.database=t.query.db,r.client_encoding=t.query.encoding,r;r.host||(r.host=t.hostname);var o=t.pathname;if(!r.host&&o&&/^%2f/i.test(o)){var a=o.split("/");r.host=decodeURIComponent(a[0]),o=a.splice(1).join("/")}return o&&"/"===o.charAt(0)&&(o=o.slice(1)||null),r.database=o&&decodeURI(o),"true"!==r.ssl&&"1"!==r.ssl||(r.ssl=!0),"0"===r.ssl&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert)&&(r.ssl={}),r.sslcert&&(r.ssl.cert=s.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=s.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=s.readFileSync(r.sslrootcert).toString()),r}var Ve=He;He.parse=He;var Ye=Ve.parse,Ke=function(e,t,r){return void 0===r?r=process.env["PG"+e.toUpperCase()]:!1===r||(r=process.env[r]),t[e]||r||Pe[e]},Je=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Xe=function(e,t,r){var n=t[r];null!=n&&e.push(r+"="+Je(n))};var Ze=class{constructor(e){(e="string"==typeof e?Ye(e):e||{}).connectionString&&(e=Object.assign({},e,Ye(e.connectionString))),this.user=Ke("user",e),this.database=Ke("database",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(Ke("port",e),10),this.host=Ke("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ke("password",e)}),this.binary=Ke("binary",e),this.options=Ke("options",e),this.ssl=void 0===e.ssl?function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Pe.ssl}():e.ssl,"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.client_encoding=Ke("client_encoding",e),this.replication=Ke("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ke("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ke("fallback_application_name",e,!1),this.statement_timeout=Ke("statement_timeout",e,!1),this.idle_in_transaction_session_timeout=Ke("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ke("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var t=[];Xe(t,this,"user"),Xe(t,this,"password"),Xe(t,this,"port"),Xe(t,this,"application_name"),Xe(t,this,"fallback_application_name"),Xe(t,this,"connect_timeout"),Xe(t,this,"options");var r="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Xe(t,r,"sslmode"),Xe(t,r,"sslca"),Xe(t,r,"sslkey"),Xe(t,r,"sslcert"),Xe(t,r,"sslrootcert"),this.database&&t.push("dbname="+Je(this.database)),this.replication&&t.push("replication="+Je(this.replication)),this.host&&t.push("host="+Je(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+Je(this.client_encoding)),l.lookup(this.host,(function(r,n){return r?e(r,null):(t.push("hostaddr="+Je(n)),e(null,t.join(" ")))}))}},et=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;var tt=class{constructor(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(e){var t;(t=e.text?et.exec(e.text):et.exec(e.command))&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))}_parseRowAsArray(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;r++){var i=e[r];t[r]=null!==i?this._parsers[r](i):null}return t}parseRow(e){for(var t={},r=0,n=e.length;r<n;r++){var i=e[r],s=this.fields[r].name;t[s]=null!==i?this._parsers[r](i):null}return t}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var t=0;t<e.length;t++){var r=e[t];this._types?this._parsers[t]=this._types.getTypeParser(r.dataTypeID,r.format||"text"):this._parsers[t]=Te.getTypeParser(r.dataTypeID,r.format||"text")}}};const{EventEmitter:rt}=t;var nt=class extends rt{constructor(e,t,r){super(),e=Ne.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new tt(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||(!!this.rows||!!this.text&&(!!this.values&&this.values.length>0))}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new tt(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){return void(this._canceledDueToError=e)}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}}handleCommandComplete(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.isPreparedStatement&&t.sync()}handleEmptyQuery(e){this.isPreparedStatement&&e.sync()}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);this.callback&&this.callback(null,this._results),this.emit("end",this._results)}handleError(e,t){if(this.isPreparedStatement&&t.sync(),this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}submit(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return new Error("A query must have either text or a name. Supplying neither is unsupported.");const t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,t){e.execute({portal:this.portal,rows:t}),e.flush()}prepare(e){if(this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types}),this.values)try{this.values=this.values.map(Ne.prepareValue)}catch(t){return void this.handleError(t,e)}e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary}),e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,t){}},it=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.Writer=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.alloc(e)}ensure(e){if(this.buffer.length-this.offset<e){var t=this.buffer,r=t.length+(t.length>>1)+e;this.buffer=Buffer.alloc(r),t.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var t=Buffer.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=t}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){var t=Buffer.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;const t=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(t,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var t=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),t}}}));_(it);it.Writer;var st=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=new it.Writer,n=[],i=Buffer.from([69,0,0,0,9,0,0,0,0,0]),s=(e,t)=>{const r=4+Buffer.byteLength(t)+1,n=Buffer.allocUnsafe(1+r);return n[0]=e,n.writeInt32BE(r,1),n.write(t,5,"utf-8"),n[r]=0,n},o=r.addCString("P").flush(68),a=r.addCString("S").flush(68),l=e=>Buffer.from([e,0,0,0,4]),u=l(72),c=l(83),h=l(88),f=l(99),d={startup:e=>{r.addInt16(3).addInt16(0);for(const t of Object.keys(e))r.addCString(t).addCString(e[t]);r.addCString("client_encoding").addCString("UTF8");var t=r.addCString("").flush(),n=t.length+4;return(new it.Writer).addInt32(n).add(t).flush()},password:e=>r.addCString(e).flush(112),requestSsl:()=>{const e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},sendSASLInitialResponseMessage:function(e,t){return r.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),r.flush(112)},sendSCRAMClientFinalMessage:function(e){return r.addString(e).flush(112)},query:e=>r.addCString(e).flush(81),parse:e=>{const t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));const i=e.types||n;for(var s=i.length,o=r.addCString(t).addCString(e.text).addInt16(s),a=0;a<s;a++)o.addInt32(i[a]);return r.flush(80)},bind:(e={})=>{const t=e.portal||"",i=e.statement||"",s=e.binary||!1;for(var o=e.values||n,a=o.length,l=!1,u=0;u<a;u++)l=l||o[u]instanceof Buffer;var c=r.addCString(t).addCString(i);if(l)for(c.addInt16(a),u=0;u<a;u++)c.addInt16(o[u]instanceof Buffer?1:0);else c.addInt16(0);c.addInt16(a);for(var h=0;h<a;h++){var f=o[h];null==f?c.addInt32(-1):f instanceof Buffer?(c.addInt32(f.length),c.add(f)):(c.addInt32(Buffer.byteLength(f)),c.addString(f))}return s?(c.addInt16(1),c.addInt16(1)):c.addInt16(0),r.flush(66)},execute:e=>{if(!e||!e.portal&&!e.rows)return i;const t=e.portal||"",r=e.rows||0,n=Buffer.byteLength(t),s=4+n+1+4,o=Buffer.allocUnsafe(1+s);return o[0]=69,o.writeInt32BE(s,1),o.write(t,5,"utf-8"),o[n+5]=0,o.writeUInt32BE(r,o.length-4),o},describe:e=>e.name?s(68,`${e.type}${e.name||""}`):"P"===e.type?o:a,close:e=>{const t=`${e.type}${e.name||""}`;return s(67,t)},flush:()=>u,sync:()=>c,end:()=>h,copyData:e=>r.add(e).flush(100),copyDone:()=>f,copyFail:e=>s(102,e),cancel:(e,t)=>{const r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r}};t.serialize=d}));_(st);st.serialize;var ot=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};class r extends Error{constructor(e,t,r){super(e),this.length=t,this.name=r}}t.DatabaseError=r;t.CopyDataMessage=class{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}};t.CopyResponse=class{constructor(e,t,r,n){this.length=e,this.name=t,this.binary=r,this.columnTypes=new Array(n)}};t.Field=class{constructor(e,t,r,n,i,s,o){this.name=e,this.tableID=t,this.columnID=r,this.dataTypeID=n,this.dataTypeSize=i,this.dataTypeModifier=s,this.format=o}};t.RowDescriptionMessage=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};t.ParameterStatusMessage=class{constructor(e,t,r){this.length=e,this.parameterName=t,this.parameterValue=r,this.name="parameterStatus"}};t.AuthenticationMD5Password=class{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}};t.BackendKeyDataMessage=class{constructor(e,t,r){this.length=e,this.processID=t,this.secretKey=r,this.name="backendKeyData"}};t.NotificationResponseMessage=class{constructor(e,t,r,n){this.length=e,this.processId=t,this.channel=r,this.payload=n,this.name="notification"}};t.ReadyForQueryMessage=class{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}};t.CommandCompleteMessage=class{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}};t.DataRowMessage=class{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}};t.NoticeMessage=class{constructor(e,t){this.length=e,this.message=t,this.name="notice"}}}));_(ot);ot.parseComplete,ot.bindComplete,ot.closeComplete,ot.noData,ot.portalSuspended,ot.replicationStart,ot.emptyQuery,ot.copyDone,ot.DatabaseError,ot.CopyDataMessage,ot.CopyResponse,ot.Field,ot.RowDescriptionMessage,ot.ParameterStatusMessage,ot.AuthenticationMD5Password,ot.BackendKeyDataMessage,ot.NotificationResponseMessage,ot.ReadyForQueryMessage,ot.CommandCompleteMessage,ot.DataRowMessage,ot.NoticeMessage;var at=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Buffer.allocUnsafe(0);t.BufferReader=class{constructor(e=0){this.offset=e,this.buffer=r,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){const e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){const e=this.buffer[this.offset];return this.offset++,e}int32(){const e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){const t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){const e=this.offset;let t=e;for(;0!==this.buffer[t++];);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}}}));_(at);at.BufferReader;var lt=S((function(e,t){var r=w&&w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(h),i=Buffer.allocUnsafe(0);t.Parser=class{constructor(e){var t,r;if(this.buffer=i,this.bufferLength=0,this.bufferOffset=0,this.reader=new at.BufferReader,"binary"===(null===(t=e)||void 0===t?void 0:t.mode))throw new Error("Binary mode not supported yet");this.mode=(null===(r=e)||void 0===r?void 0:r.mode)||"text"}parse(e,t){this.mergeBuffer(e);const r=this.bufferOffset+this.bufferLength;let n=this.bufferOffset;for(;n+5<=r;){const e=this.buffer[n],i=this.buffer.readUInt32BE(n+1),s=1+i;if(!(s+n<=r))break;t(this.handlePacket(n+5,e,i,this.buffer)),n+=s}n===r?(this.buffer=i,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-n,this.bufferOffset=n)}mergeBuffer(e){if(this.bufferLength>0){const t=this.bufferLength+e.byteLength;if(t+this.bufferOffset>this.buffer.byteLength){let e;if(t<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)e=this.buffer;else{let r=2*this.buffer.byteLength;for(;t>=r;)r*=2;e=Buffer.allocUnsafe(r)}this.buffer.copy(e,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=e,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=t}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,t,r,i){switch(t){case 50:return ot.bindComplete;case 49:return ot.parseComplete;case 51:return ot.closeComplete;case 110:return ot.noData;case 115:return ot.portalSuspended;case 99:return ot.copyDone;case 87:return ot.replicationStart;case 73:return ot.emptyQuery;case 68:return this.parseDataRowMessage(e,r,i);case 67:return this.parseCommandCompleteMessage(e,r,i);case 90:return this.parseReadyForQueryMessage(e,r,i);case 65:return this.parseNotificationMessage(e,r,i);case 82:return this.parseAuthenticationResponse(e,r,i);case 83:return this.parseParameterStatusMessage(e,r,i);case 75:return this.parseBackendKeyData(e,r,i);case 69:return this.parseErrorMessage(e,r,i,"error");case 78:return this.parseErrorMessage(e,r,i,"notice");case 84:return this.parseRowDescriptionMessage(e,r,i);case 71:return this.parseCopyInMessage(e,r,i);case 72:return this.parseCopyOutMessage(e,r,i);case 100:return this.parseCopyData(e,r,i);default:n.default.fail("unknown message code: "+t.toString(16))}}parseReadyForQueryMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.string(1);return new ot.ReadyForQueryMessage(t,n)}parseCommandCompleteMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring();return new ot.CommandCompleteMessage(t,n)}parseCopyData(e,t,r){const n=r.slice(e,e+(t-4));return new ot.CopyDataMessage(t,n)}parseCopyInMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyInResponse")}parseCopyOutMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyOutResponse")}parseCopyMessage(e,t,r,n){this.reader.setBuffer(e,r);const i=0!==this.reader.byte(),s=this.reader.int16(),o=new ot.CopyResponse(t,n,i,s);for(let e=0;e<s;e++)o.columnTypes[e]=this.reader.int16();return o}parseNotificationMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.cstring(),s=this.reader.cstring();return new ot.NotificationResponseMessage(t,n,i,s)}parseRowDescriptionMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new ot.RowDescriptionMessage(t,n);for(let e=0;e<n;e++)i.fields[e]=this.parseField();return i}parseField(){const e=this.reader.cstring(),t=this.reader.int32(),r=this.reader.int16(),n=this.reader.int32(),i=this.reader.int16(),s=this.reader.int32(),o=0===this.reader.int16()?"text":"binary";return new ot.Field(e,t,r,n,i,s,o)}parseDataRowMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new Array(n);for(let e=0;e<n;e++){const t=this.reader.int32();i[e]=-1===t?null:this.reader.string(t)}return new ot.DataRowMessage(t,i)}parseParameterStatusMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring(),i=this.reader.cstring();return new ot.ParameterStatusMessage(t,n,i)}parseBackendKeyData(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.int32();return new ot.BackendKeyDataMessage(t,n,i)}parseAuthenticationResponse(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i={name:"authenticationOk",length:t};switch(n){case 0:break;case 3:8===i.length&&(i.name="authenticationCleartextPassword");break;case 5:if(12===i.length){i.name="authenticationMD5Password";const e=this.reader.bytes(4);return new ot.AuthenticationMD5Password(t,e)}break;case 10:let e;i.name="authenticationSASL",i.mechanisms=[];do{e=this.reader.cstring(),e&&i.mechanisms.push(e)}while(e);break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(t-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(t-8);break;default:throw new Error("Unknown authenticationOk message type "+n)}return i}parseErrorMessage(e,t,r,n){this.reader.setBuffer(e,r);const i={};let s=this.reader.string(1);for(;"\0"!==s;)i[s]=this.reader.cstring(),s=this.reader.string(1);const o=i.M,a="notice"===n?new ot.NoticeMessage(t,o):new ot.DatabaseError(o,t,n);return a.severity=i.S,a.code=i.C,a.detail=i.D,a.hint=i.H,a.position=i.P,a.internalPosition=i.p,a.internalQuery=i.q,a.where=i.W,a.schema=i.s,a.table=i.t,a.column=i.c,a.dataType=i.d,a.constraint=i.n,a.file=i.F,a.line=i.L,a.routine=i.R,a}}}));_(lt);lt.Parser;var ut=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=st.serialize,t.parse=function(e,t){const r=new lt.Parser;return e.on("data",e=>r.parse(e,t)),new Promise(t=>e.on("end",()=>t()))}}));_(ut);ut.serialize,ut.parse;var ct=t.EventEmitter;const{parse:ht,serialize:ft}=ut,dt=ft.flush(),pt=ft.sync(),gt=ft.end();var mt=class extends ct{constructor(e){super(),e=e||{},this.stream=e.stream||new c.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on("newListener",(function(e){"message"===e&&(t._emitMessage=!0)}))}connect(e,t){var r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,t),this.stream.once("connect",(function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")}));const n=function(e){(!r._ending||"ECONNRESET"!==e.code&&"EPIPE"!==e.code)&&r.emit("error",e)};if(this.stream.on("error",n),this.stream.on("close",(function(){r.emit("end")})),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",(function(e){switch(e.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}var i=f;const s=Object.assign({socket:r.stream},r.ssl);0===c.isIP(t)&&(s.servername=t);try{r.stream=i.connect(s)}catch(e){return r.emit("error",e)}r.attachListeners(r.stream),r.stream.on("error",n),r.emit("sslconnect")}))}attachListeners(e){e.on("end",()=>{this.emit("end")}),ht(e,e=>{var t="error"===e.name?"errorMessage":e.name;this._emitMessage&&this.emit("message",e),this.emit(t,e)})}requestSsl(){this.stream.write(ft.requestSsl())}startup(e){this.stream.write(ft.startup(e))}cancel(e,t){this._send(ft.cancel(e,t))}password(e){this._send(ft.password(e))}sendSASLInitialResponseMessage(e,t){this._send(ft.sendSASLInitialResponseMessage(e,t))}sendSCRAMClientFinalMessage(e){this._send(ft.sendSCRAMClientFinalMessage(e))}_send(e){return!!this.stream.writable&&this.stream.write(e)}query(e){this._send(ft.query(e))}parse(e){this._send(ft.parse(e))}bind(e){this._send(ft.bind(e))}execute(e){this._send(ft.execute(e))}flush(){this.stream.writable&&this.stream.write(dt)}sync(){this._ending=!0,this._send(dt),this._send(pt)}end(){if(this._ending=!0,this._connecting&&this.stream.writable)return this.stream.write(gt,()=>{this.stream.end()});this.stream.end()}close(e){this._send(ft.close(e))}describe(e){this._send(ft.describe(e))}sendCopyFromChunk(e){this._send(ft.copyData(e))}endCopyFrom(){this._send(ft.copyDone())}sendCopyFail(e){this._send(ft.copyFail(e))}},bt=t.EventEmitter;class yt extends bt{constructor(e){super(),this.connectionParameters=new Ze(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var t=e||{};this._Promise=t.Promise||w.Promise,this._types=new Ge(t.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=t.connection||new mt({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,keepAliveInitialDelayMillis:t.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=t.binary||Pe.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this._connectionTimeoutMillis=t.connectionTimeoutMillis||0}_errorAllQueries(e){const t=t=>{process.nextTick(()=>{t.handleError(e,this.connection)})};this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0}_connect(e){var t=this,r=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){const t=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(t)})}else this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{r._ending=!0,r.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",(function(){t.ssl?r.requestSsl():r.startup(t.getStartupConf())})),r.on("sslconnect",(function(){r.startup(t.getStartupConf())})),this._attachListeners(r),r.once("end",()=>{const e=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(e),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(e):this._handleErrorEvent(e):this._connectionError||this._handleErrorEvent(e)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){const t=this.connection;"function"==typeof this.password?this._Promise.resolve().then(()=>this.password()).then(r=>{if(void 0!==r){if("string"!=typeof r)return void t.emit("error",new TypeError("Password must be a string"));this.connectionParameters.password=this.password=r}else this.connectionParameters.password=this.password=null;e()}).catch(e=>{t.emit("error",e)}):null!==this.password?e():$e(this.connectionParameters,(function(t){void 0!==t&&(this.connectionParameters.password=this.password=t),e()}))}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(()=>{const t=Ne.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(t)})}_handleAuthSASL(e){this._checkPgPass(()=>{this.saslSession=qe.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(e){qe.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(e){qe.finalizeSession(this.saslSession,e.data),this.saslSession=null}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));const{activeQuery:t}=this;this.activeQuery=null,this.readyForQuery=!0,t&&t.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);const t=this.activeQuery;t?(this.activeQuery=null,t.handleError(e,this.connection)):this._handleErrorEvent(e)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,t={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(t.application_name=r),e.replication&&(t.replication=""+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(t.options=e.options),t}cancel(e,t){if(e.activeQuery===t){var r=this.connection;this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",(function(){r.cancel(e.processID,e.secretKey)}))}else-1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)}setTypeParser(e,t,r){return this._types.setTypeParser(e,t,r)}getTypeParser(e,t){return this._types.getTypeParser(e,t)}escapeIdentifier(e){return'"'+e.replace(/"/g,'""')+'"'}escapeLiteral(e){for(var t=!1,r="'",n=0;n<e.length;n++){var i=e[n];"'"===i?r+=i+i:"\\"===i?(r+=i+i,t=!0):r+=i}return r+="'",!0===t&&(r=" E"+r),r}_pulseQueryQueue(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;const e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,t,r){var n,i,s,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(n.callback=n.callback||t)):(s=this.connectionParameters.query_timeout,(n=new nt(e,t,r)).callback||(i=new this._Promise((e,t)=>{n.callback=(r,n)=>r?t(r):e(n)}))),s&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this.queryQueue.indexOf(n);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()},s),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(n),this._pulseQueryQueue(),i):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)}end(e){if(this._ending=!0,!this.connection._connecting){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once("end",e)});this.connection.once("end",e)}}yt.Query=nt;var vt=yt;const wt=t.EventEmitter,_t=function(){},St=(e,t)=>{const r=e.findIndex(t);return-1===r?void 0:e.splice(r,1)[0]};class Et{constructor(e,t,r){this.client=e,this.idleListener=t,this.timeoutId=r}}class Mt{constructor(e){this.callback=e}}function xt(e,t){if(t)return{callback:t,result:void 0};let r,n;return{callback:function(e,t){e?r(e):n(t)},result:new e((function(e,t){n=e,r=t}))}}var kt=class extends wt{constructor(e,t){super(),this.options=Object.assign({},e),null!=e&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.log=this.options.log||function(){},this.Client=this.options.Client||t||Xt.Client,this.Promise=this.options.Promise||w.Promise,void 0===this.options.idleTimeoutMillis&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended)return void this.log("pulse queue ended");if(this.ending)return this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),void(this._clients.length||(this.ended=!0,this._endCallback()));if(!this._pendingQueue.length)return void this.log("no queued requests");if(!this._idle.length&&this._isFull())return;const e=this._pendingQueue.shift();if(this._idle.length){const t=this._idle.pop();clearTimeout(t.timeoutId);const r=t.client,n=t.idleListener;return this._acquireClient(r,e,n,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e){const t=St(this._idle,t=>t.client===e);void 0!==t&&clearTimeout(t.timeoutId),this._clients=this._clients.filter(t=>t!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){const t=new Error("Cannot use a pool after calling end on the pool");return e?e(t):this.Promise.reject(t)}const t=xt(this.Promise,e),r=t.result;if(this._clients.length>=this.options.max||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Mt(t.callback)),r;const e=(e,r,n)=>{clearTimeout(i),t.callback(e,r,n)},n=new Mt(e),i=setTimeout(()=>{St(this._pendingQueue,t=>t.callback===e),n.timedOut=!0,t.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(n),r}return this.newClient(new Mt(t.callback)),r}newClient(e){const t=new this.Client(this.options);this._clients.push(t);const r=function(e,t){return function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)}}(this,t);let n;this.log("checking client timeout");let i=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,t.connection?t.connection.stream.destroy():t.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),t.connect(s=>{if(n&&clearTimeout(n),t.on("error",r),!s)return this.log("new client connected"),this._acquireClient(t,e,r,!0);this.log("client failed to connect",s),this._clients=this._clients.filter(e=>e!==t),i&&(s.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(s,void 0,_t)})}_acquireClient(e,t,r,n){n&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,r),e.removeListener("error",r),t.timedOut?n&&this.options.verify?this.options.verify(e,e.release):e.release():n&&this.options.verify?this.options.verify(e,r=>{if(r)return e.release(r),t.callback(r,void 0,_t);t.callback(void 0,e,e.release)}):t.callback(void 0,e,e.release)}_releaseOnce(e,t){let r=!1;return n=>{r&&function(){throw new Error("Release called on client which has already been released to the pool.")}(),r=!0,this._release(e,t,n)}}_release(e,t,r){if(e.on("error",t),e._poolUseCount=(e._poolUseCount||0)+1,r||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),void this._pulseQueue();let n;this.options.idleTimeoutMillis&&(n=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis)),this._idle.push(new Et(e,t,n)),this._pulseQueue()}query(e,t,r){if("function"==typeof e){const t=xt(this.Promise,e);return setImmediate((function(){return t.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))})),t.result}"function"==typeof t&&(r=t,t=void 0);const n=xt(this.Promise,r);return r=n.callback,this.connect((n,i)=>{if(n)return r(n);let s=!1;const o=e=>{s||(s=!0,i.release(e),r(e))};i.once("error",o),this.log("dispatching query"),i.query(e,t,(e,t)=>{if(this.log("query dispatched"),i.removeListener("error",o),!s)return s=!0,i.release(e),e?r(e):r(void 0,t)})}),n.result}end(e){if(this.log("ending"),this.ending){const t=new Error("Called end on pool more than once");return e?e(t):this.Promise.reject(t)}this.ending=!0;const t=xt(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get totalCount(){return this._clients.length}},Rt=S((function(e,t){var r;e.exports===t&&(t=e.exports=z),r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],s=t.src=[],o=0,a=o++;s[a]="0|[1-9]\\d*";var l=o++;s[l]="[0-9]+";var u=o++;s[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var c=o++;s[c]="("+s[a]+")\\.("+s[a]+")\\.("+s[a]+")";var h=o++;s[h]="("+s[l]+")\\.("+s[l]+")\\.("+s[l]+")";var f=o++;s[f]="(?:"+s[a]+"|"+s[u]+")";var d=o++;s[d]="(?:"+s[l]+"|"+s[u]+")";var p=o++;s[p]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var g=o++;s[g]="(?:-?("+s[d]+"(?:\\."+s[d]+")*))";var m=o++;s[m]="[0-9A-Za-z-]+";var b=o++;s[b]="(?:\\+("+s[m]+"(?:\\."+s[m]+")*))";var y=o++,v="v?"+s[c]+s[p]+"?"+s[b]+"?";s[y]="^"+v+"$";var w="[v=\\s]*"+s[h]+s[g]+"?"+s[b]+"?",_=o++;s[_]="^"+w+"$";var S=o++;s[S]="((?:<|>)?=?)";var E=o++;s[E]=s[l]+"|x|X|\\*";var M=o++;s[M]=s[a]+"|x|X|\\*";var x=o++;s[x]="[v=\\s]*("+s[M]+")(?:\\.("+s[M]+")(?:\\.("+s[M]+")(?:"+s[p]+")?"+s[b]+"?)?)?";var k=o++;s[k]="[v=\\s]*("+s[E]+")(?:\\.("+s[E]+")(?:\\.("+s[E]+")(?:"+s[g]+")?"+s[b]+"?)?)?";var R=o++;s[R]="^"+s[S]+"\\s*"+s[x]+"$";var O=o++;s[O]="^"+s[S]+"\\s*"+s[k]+"$";var C=o++;s[C]="(?:~>?)";var T=o++;s[T]="(\\s*)"+s[C]+"\\s+",i[T]=new RegExp(s[T],"g");var P=o++;s[P]="^"+s[C]+s[x]+"$";var j=o++;s[j]="^"+s[C]+s[k]+"$";var A=o++;s[A]="(?:\\^)";var I=o++;s[I]="(\\s*)"+s[A]+"\\s+",i[I]=new RegExp(s[I],"g");var N=o++;s[N]="^"+s[A]+s[x]+"$";var L=o++;s[L]="^"+s[A]+s[k]+"$";var D=o++;s[D]="^"+s[S]+"\\s*("+w+")$|^$";var q=o++;s[q]="^"+s[S]+"\\s*("+v+")$|^$";var B=o++;s[B]="(\\s*)"+s[S]+"\\s*("+w+"|"+s[x]+")",i[B]=new RegExp(s[B],"g");var F=o++;s[F]="^\\s*("+s[x]+")\\s+-\\s+("+s[x]+")\\s*$";var Q=o++;s[Q]="^\\s*("+s[k]+")\\s+-\\s+("+s[k]+")\\s*$";var U=o++;s[U]="(<|>)?=?\\s*\\*";for(var $=0;$<34;$++)r($,s[$]),i[$]||(i[$]=new RegExp(s[$]));function W(e,t){if(e.length>256)return null;if(!(t?i[_]:i[y]).test(e))return null;try{return new z(e,t)}catch(e){return null}}function z(e,t){if(e instanceof z){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof z))return new z(e,t);r("SemVer",e,t),this.loose=t;var s=e.trim().match(t?i[_]:i[y]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){return/^[0-9]+$/.test(e)?+e:e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=W,t.valid=function(e,t){var r=W(e,t);return r?r.version:null},t.clean=function(e,t){var r=W(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=z,z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},z.prototype.inspect=function(){return'<SemVer "'+this+'">'},z.prototype.toString=function(){return this.version},z.prototype.compare=function(e){return r("SemVer.compare",this.version,this.loose,e),e instanceof z||(e=new z(e,this.loose)),this.compareMain(e)||this.comparePre(e)},z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.loose)),H(this.major,e.major)||H(this.minor,e.minor)||H(this.patch,e.patch)},z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return H(n,i)}while(++t)},z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(X(e,t))return null;var r=W(e),n=W(t);if(r.prerelease.length||n.prerelease.length){for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return"pre"+i;return"prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return i},t.compareIdentifiers=H;var G=/^[0-9]+$/;function H(e,t){var r=G.test(e),n=G.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function V(e,t,r){return new z(e,r).compare(t)}function Y(e,t,r){return V(t,e,r)}function K(e,t,r){return V(e,t,r)>0}function J(e,t,r){return V(e,t,r)<0}function X(e,t,r){return 0===V(e,t,r)}function Z(e,t,r){return 0!==V(e,t,r)}function ee(e,t,r){return V(e,t,r)>=0}function te(e,t,r){return V(e,t,r)<=0}function re(e,t,r,n){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e!==r;break;case"":case"=":case"==":i=X(e,r,n);break;case"!=":i=Z(e,r,n);break;case">":i=K(e,r,n);break;case">=":i=ee(e,r,n);break;case"<":i=J(e,r,n);break;case"<=":i=te(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return i}function ne(e,t){if(e instanceof ne){if(e.loose===t)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.loose=t,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return H(t,e)},t.major=function(e,t){return new z(e,t).major},t.minor=function(e,t){return new z(e,t).minor},t.patch=function(e,t){return new z(e,t).patch},t.compare=V,t.compareLoose=function(e,t){return V(e,t,!0)},t.rcompare=Y,t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=K,t.lt=J,t.eq=X,t.neq=Z,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var ie={};function se(e,t){if(e instanceof se&&e.loose===t)return e;if(!(this instanceof se))return new se(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function oe(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,r,n,i,s,o,a,l,u,c,h,f){return((t=oe(r)?"":oe(n)?">="+r+".0.0":oe(i)?">="+r+"."+n+".0":">="+t)+" "+(a=oe(l)?"":oe(u)?"<"+(+l+1)+".0.0":oe(c)?"<"+l+"."+(+u+1)+".0":h?"<="+l+"."+u+"."+c+"-"+h:"<="+a)).trim()}function le(e,t){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length){for(n=0;n<e.length;n++){if(r(e[n].semver),e[n].semver===ie)return!0;if(e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}}return!1}return!0}function ue(e,t,r){try{t=new se(t,r)}catch(e){return!1}return t.test(e)}function ce(e,t,r,n){var i,s,o,a,l;switch(e=new z(e,n),t=new se(t,n),r){case">":i=K,s=te,o=J,a=">",l=">=";break;case"<":i=J,s=ee,o=K,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var c=t.set[u],h=null,f=null;if(c.forEach((function(e){h=h||e,f=f||e,i(e.semver,h.semver,n)?h=e:o(e.semver,f.semver,n)&&(f=e)})),h.operator===a||h.operator===l)return!1;if((!f.operator||f.operator===a)&&s(e,f.semver))return!1;if(f.operator===l&&o(e,f.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.loose?i[D]:i[q],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new z(r[2],this.loose):this.semver=ie},ne.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.loose),this.semver===ie||("string"==typeof e&&(e=new z(e,this.loose)),re(e,this.operator,this.semver,this.loose))},t.Range=se,se.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'},se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),r("range",e,t);var n=t?i[Q]:i[F];e=e.replace(n,ae),r("hyphen replace",e),e=e.replace(i[B],"$1$2$3"),r("comparator trim",e,i[B]),e=(e=(e=e.replace(i[T],"$1~")).replace(i[I],"$1^")).split(/\s+/).join(" ");var s=t?i[D]:i[q],o=e.split(" ").map((function(e){return function(e,t){return r("comp",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t?i[L]:i[N];return e.replace(n,(function(t,n,i,s,o){var a;return r("caret",e,t,n,i,s,o),oe(n)?a="":oe(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":oe(s)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":o?(r("replaceCaret pr",o),"-"!==o.charAt(0)&&(o="-"+o),a="0"===n?"0"===i?">="+n+"."+i+"."+s+o+" <"+n+"."+i+"."+(+s+1):">="+n+"."+i+"."+s+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+s+o+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+s+" <"+n+"."+i+"."+(+s+1):">="+n+"."+i+"."+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+s+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t?i[j]:i[P];return e.replace(n,(function(t,n,i,s,o){var a;return r("tilde",e,t,n,i,s,o),oe(n)?a="":oe(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":oe(s)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":o?(r("replaceTilde pr",o),"-"!==o.charAt(0)&&(o="-"+o),a=">="+n+"."+i+"."+s+o+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+s+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t?i[O]:i[R];return e.replace(n,(function(t,n,i,s,o,a){r("xRange",e,t,n,i,s,o,a);var l=oe(i),u=l||oe(s),c=u||oe(o);return"="===n&&c&&(n=""),l?t=">"===n||"<"===n?"<0.0.0":"*":n&&c?(u&&(s=0),c&&(o=0),">"===n?(n=">=",u?(i=+i+1,s=0,o=0):c&&(s=+s+1,o=0)):"<="===n&&(n="<",u?i=+i+1:s=+s+1),t=n+i+"."+s+"."+o):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":c&&(t=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[U],"")}(e,t),r("stars",e),e}(e,t)})).join(" ").split(/\s+/);return this.loose&&(o=o.filter((function(e){return!!e.match(s)}))),o=o.map((function(e){return new ne(e,t)}))},t.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new z(e,this.loose));for(var t=0;t<this.set.length;t++)if(le(this.set[t],e))return!0;return!1},t.satisfies=ue,t.maxSatisfying=function(e,t,r){return e.filter((function(e){return ue(e,t,r)})).sort((function(e,t){return Y(e,t,r)}))[0]||null},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return ce(e,t,"<",r)},t.gtr=function(e,t,r){return ce(e,t,">",r)},t.outside=ce})),Ot=(Rt.SEMVER_SPEC_VERSION,Rt.re,Rt.src,Rt.parse,Rt.valid,Rt.clean,Rt.SemVer,Rt.inc,Rt.diff,Rt.compareIdentifiers,Rt.rcompareIdentifiers,Rt.major,Rt.minor,Rt.patch,Rt.compare,Rt.compareLoose,Rt.rcompare,Rt.sort,Rt.rsort,Rt.gt,Rt.lt,Rt.eq,Rt.neq,Rt.gte,Rt.lte,Rt.cmp,Rt.Comparator,Rt.Range,Rt.toComparators,Rt.satisfies,Rt.maxSatisfying,Rt.validRange,Rt.ltr,Rt.gtr,Rt.outside,"sha512-hOoRCTriXS+VWwyXHchRjWb9yv3Koq8irlwwXniqhdgK0AbfWvEnybGS2HIUE+UdCSTuYAM4WGPujFpPg9Vcaw=="),Ct={},Tt={type:"range",registry:!0,raw:"pg@^8.3.2",name:"pg",escapedName:"pg",rawSpec:"^8.3.2",saveSpec:null,fetchSpec:"^8.3.2"},Pt=["/"],jt="https://registry.npmjs.org/pg/-/pg-8.3.2.tgz",At="52766e41302f5b878fe1efa10d4cdd486f6dff50",It="/media/dimkk/apps21/mine/opportunity/pg-worker2",Nt={name:"Brian Carlson",email:"brian.m.carlson@gmail.com"},Lt={url:"https://github.com/brianc/node-postgres/issues"},Dt={"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.3.0","pg-pool":"^3.2.1","pg-protocol":"^1.2.5","pg-types":"^2.1.0",pgpass:"1.x",semver:"4.3.2"},qt="PostgreSQL client - pure javascript & libpq with the same API",Bt={async:"0.9.0",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},Ft={node:">= 8.0.0"},Qt=["lib","SPONSORS.md"],Ut="acfbafac82641ef909d9d6235d46d38378c67864",$t="https://github.com/brianc/node-postgres",Wt=["database","libpq","pg","postgre","postgres","postgresql","rdbms"],zt={type:"git",url:"git://github.com/brianc/node-postgres.git"},Gt={test:"make test-all"},Ht={_from:"pg@^8.3.2",_id:"pg@8.3.2",_inBundle:!1,_integrity:Ot,_location:"/pg",_phantomChildren:Ct,_requested:Tt,_requiredBy:Pt,_resolved:jt,_shasum:At,_spec:"pg@^8.3.2",_where:It,author:Nt,bugs:Lt,bundleDependencies:!1,dependencies:Dt,deprecated:!1,description:qt,devDependencies:Bt,engines:Ft,files:Qt,gitHead:Ut,homepage:$t,keywords:Wt,license:"MIT",main:"./lib",minNativeVersion:"2.0.0",name:"pg",repository:zt,scripts:Gt,version:"8.3.2"},Vt=Object.freeze({__proto__:null,_from:"pg@^8.3.2",_id:"pg@8.3.2",_inBundle:!1,_integrity:Ot,_location:"/pg",_phantomChildren:Ct,_requested:Tt,_requiredBy:Pt,_resolved:jt,_shasum:At,_spec:"pg@^8.3.2",_where:It,author:Nt,bugs:Lt,bundleDependencies:!1,dependencies:Dt,deprecated:!1,description:qt,devDependencies:Bt,engines:Ft,files:Qt,gitHead:Ut,homepage:$t,keywords:Wt,license:"MIT",main:"./lib",minNativeVersion:"2.0.0",name:"pg",repository:zt,scripts:Gt,version:"8.3.2",default:Ht}),Yt=S((function(e){var n=t.EventEmitter,i=e.exports=function(e,t,r){n.call(this),e=Ne.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",function(e){"row"===e&&(this._emitRowEvents=!0)}.bind(this))};r.inherits(i,n);var s={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var r in t){e[s[r]||r]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"},i.prototype.then=function(e,t){return this._getPromise().then(e,t)},i.prototype.catch=function(e){return this._getPromise().catch(e)},i.prototype._getPromise=function(){return this._promise||(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this))),this._promise},i.prototype.submit=function(e){this.state="running";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var r=function(r,n,i){if(e.native.arrayMode=!1,setImmediate((function(){t.emit("_done")})),r)return t.handleError(r);t._emitRowEvents&&(i.length>1?n.forEach((e,r)=>{e.forEach(e=>{t.emit("row",e,i[r])})}):n.forEach((function(e){t.emit("row",e,i)}))),t.state="end",t.emit("end",i),t.callback&&t.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var n=(this.values||[]).map(Ne.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){const e=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(e)}return e.native.execute(this.name,n,r)}return e.native.prepare(this.name,this.text,n.length,(function(i){return i?r(i):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,n,r))}))}if(this.values){if(!Array.isArray(this.values)){const e=new Error("Query values must be an array");return r(e)}var i=this.values.map(Ne.prepareValue);e.native.query(this.text,i,r)}else e.native.query(this.text,r)}})),Kt=E(Vt),Jt=S((function(e){var n=t.EventEmitter,i="Version >= "+Kt.minNativeVersion+" of pg-native required.";h(Rt.gte(d.version,Kt.minNativeVersion),i);var s=e.exports=function(e){n.call(this),e=e||{},this._Promise=e.Promise||w.Promise,this._types=new Ge(e.types),this.native=new d({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var t=this.connectionParameters=new Ze(e);this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};s.Query=Yt,r.inherits(s,n),s.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick(()=>{t.native=this.native,t.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},s.prototype._connect=function(e){var t=this;this._connecting?process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client."))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString((function(r,n){if(r)return e(r);t.native.connect(n,(function(r){if(r)return t.native.end(),e(r);t._connected=!0,t.native.on("error",(function(e){t._queryable=!1,t._errorAllQueries(e),t.emit("error",e)})),t.native.on("notification",(function(e){t.emit("notification",{channel:e.relname,payload:e.extra})})),t.emit("connect"),t._pulseQueryQueue(!0),e()}))})))},s.prototype.connect=function(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)},s.prototype.query=function(e,t,r){var n,i,s,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(e.callback=t);else if(s=this.connectionParameters.query_timeout,!(n=new Yt(e,t,r)).callback){let e,t;i=new this._Promise((r,n)=>{e=r,t=n}),n.callback=(r,n)=>r?t(r):e(n)}return s&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this._queryQueue.indexOf(n);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()},s),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(n),this._pulseQueryQueue(),i):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)},s.prototype.end=function(e){var t,r=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(t=new this._Promise((function(t,r){e=e=>e?r(e):t()}))),this.native.end((function(){r._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{r.emit("end"),e&&e()})})),t},s.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},s.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(t){this._activeQuery=t,t.submit(this);var r=this;t.once("_done",(function(){r._pulseQueryQueue()}))}else e||this.emit("drain")}},s.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel((function(){})):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},s.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},s.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}})),Xt=S((function(e){const t=e=>class extends kt{constructor(t){super(t,e)}};var r=function(e){this.defaults=Pe,this.Client=e,this.Query=this.Client.Query,this.Pool=t(this.Client),this._pools=[],this.Connection=mt,this.types=Te};void 0!==process.env.NODE_PG_FORCE_NATIVE?e.exports=new r(Jt):(e.exports=new r(vt),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var t=null;try{t=new r(Jt)}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e;console.error(e.message)}return Object.defineProperty(e.exports,"native",{value:t}),t}}))})),Zt=function(e){var t=this;this._opts={pgClientConfig:{user:"postgres",database:"crunchbase",password:"postgres",connectionTimeoutMillis:300,idleTimeoutMillis:3e3}},this.getClient=function(){return t._client},Object.assign(this._opts,e,{}),this._client=new Xt.Pool(this._opts.pgClientConfig)};class er extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)\nFound: ${e.toString().split("\n")[0]}\n`),Error.captureStackTrace(this,er)}}var tr=e=>{if(e.length>2)throw new er(e);function t(e={}){this.options=e}function r(e){return new t(e)}return t.prototype.transform=e,r.Format=t,r},rr=S((function(e){var t={};e.exports=t;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach((function(e){var n=r[e],i=t[e]=[];i.open="["+n[0]+"m",i.close="["+n[1]+"m"}))})),nr=function(e,t){var r=(t=t||process.argv).indexOf("--"),n=/^-{1,2}/.test(e)?"":"--",i=t.indexOf(n+e);return-1!==i&&(-1===r||i<r)},ir=process.env,sr=void 0;function or(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===sr)return 0;if(nr("color=16m")||nr("color=full")||nr("color=truecolor"))return 3;if(nr("color=256"))return 2;if(e&&!e.isTTY&&!0!==sr)return 0;var t=sr?1:0;if("win32"===process.platform){var r=p.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in ir)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in ir}))||"codeship"===ir.CI_NAME?1:t;if("TEAMCITY_VERSION"in ir)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ir.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in ir){var n=parseInt((ir.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ir.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ir.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(ir.TERM)||"COLORTERM"in ir?1:(ir.TERM,t)}(e))}nr("no-color")||nr("no-colors")||nr("color=false")?sr=!1:(nr("color")||nr("colors")||nr("color=true")||nr("color=always"))&&(sr=!0),"FORCE_COLOR"in ir&&(sr=0===ir.FORCE_COLOR.length||0!==parseInt(ir.FORCE_COLOR,10));var ar=or,lr=(or(process.stdout),or(process.stderr),S((function(e){e.exports=function(e,t){var r="";e=(e=e||"Run the trap, drop the bass").split("");var n={a:["@","","","","","",""],b:["","","","","",""],c:["","",""],d:["","","","","",""],e:["","","","","","","",""],f:[""],g:[""],h:["","","","","",""],i:[""],j:[""],k:["","","",""],l:[""],m:["","","","","",""],n:["","","","","",""],o:["","","","","","","","",""],p:["",""],q:[""],r:["","","","","",""],s:["","","",""],t:["","",""],u:["",""],v:[""],w:["","","",""],x:["","","",""],y:["","",""],z:["",""]};return e.forEach((function(e){e=e.toLowerCase();var t=n[e]||[" "],i=Math.floor(Math.random()*t.length);r+=void 0!==n[e]?n[e][i]:e})),r}}))),ur=S((function(e){e.exports=function(e,t){e=e||"   he is here   ";var r={up:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],down:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],mid:["","","","","","","","","","","","","","","","","","","","",""," "]},n=[].concat(r.up,r.down,r.mid);function i(e){return Math.floor(Math.random()*e)}function s(e){var t=!1;return n.filter((function(r){t=r===e})),t}return function(e,t){var n,o,a="";for(o in(t=t||{}).up=void 0===t.up||t.up,t.mid=void 0===t.mid||t.mid,t.down=void 0===t.down||t.down,t.size=void 0!==t.size?t.size:"maxi",e=e.split(""))if(!s(o)){switch(a+=e[o],n={up:0,down:0,mid:0},t.size){case"mini":n.up=i(8),n.mid=i(2),n.down=i(8);break;case"maxi":n.up=i(16)+3,n.mid=i(4)+1,n.down=i(64)+3;break;default:n.up=i(8)+1,n.mid=i(6)/2,n.down=i(8)+1}var l=["up","mid","down"];for(var u in l)for(var c=l[u],h=0;h<=n[c];h++)t[c]&&(a+=r[c][i(r[c].length)])}return a}(e,t)}})),cr=S((function(e){e.exports=function(e){return function(t,r,n){if(" "===t)return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}})),hr=S((function(e){e.exports=function(e){return function(t,r,n){return r%2==0?t:e.inverse(t)}}})),fr=S((function(e){e.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,i){return" "===r?r:e[t[n++%t.length]](r)}}})),dr=S((function(e){e.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return" "===r?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}})),pr=S((function(e){var t={};e.exports=t,t.themes={};var n=t.styles=rr,i=Object.defineProperties,s=new RegExp(/[\r\n]+/g);t.supportsColor=ar,void 0===t.enabled&&(t.enabled=!1!==t.supportsColor()),t.enable=function(){t.enabled=!0},t.disable=function(){t.enabled=!1},t.stripColors=t.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};t.stylize=function(e,r){if(!t.enabled)return e+"";var i=n[r];return!i&&r in t?t[r](e):i.open+e+i.close};var o=/[|\\{}()[\]^$+*?.]/g;function a(e){var t=function e(){return h.apply(e,arguments)};return t._styles=e,t.__proto__=c,t}var l,u=(l={},n.grey=n.gray,Object.keys(n).forEach((function(e){n[e].closeRe=new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(o,"\\$&")}(n[e].close),"g"),l[e]={get:function(){return a(this._styles.concat(e))}}})),l),c=i((function(){}),u);function h(){var e=Array.prototype.slice.call(arguments),i=e.map((function(e){return null!=e&&e.constructor===String?e:r.inspect(e)})).join(" ");if(!t.enabled||!i)return i;for(var o=-1!=i.indexOf("\n"),a=this._styles,l=a.length;l--;){var u=n[a[l]];i=u.open+i.replace(u.closeRe,u.open)+u.close,o&&(i=i.replace(s,(function(e){return u.close+e+u.open})))}return i}t.setTheme=function(e){if("string"!=typeof e)for(var r in e)!function(r){t[r]=function(n){if("object"==typeof e[r]){var i=n;for(var s in e[r])i=t[e[r][s]](i);return i}return t[e[r]](n)}}(r);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var f=function(e,t){var r=t.split("");return(r=r.map(e)).join("")};for(var d in t.trap=lr,t.zalgo=ur,t.maps={},t.maps.america=cr(t),t.maps.zebra=hr(t),t.maps.rainbow=fr(t),t.maps.random=dr(t),t.maps)!function(e){t[e]=function(r){return f(t.maps[e],r)}}(d);i(t,function(){var e={};return Object.keys(u).forEach((function(t){e[t]={get:function(){return a([t])}}})),e}())})),gr=S((function(e){e.exports=pr})),mr={levels:{error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9},colors:{error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},br={levels:{error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6},colors:{error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},yr={levels:{emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7},colors:{emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},vr=S((function(e,t){Object.defineProperty(t,"cli",{value:mr}),Object.defineProperty(t,"npm",{value:br}),Object.defineProperty(t,"syslog",{value:yr})})),wr=S((function(e,t){Object.defineProperty(t,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(t,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(t,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(t,"configs",{value:vr})})),_r=S((function(e){const{LEVEL:t,MESSAGE:r}=wr;gr.enabled=!0;const n=/\s+/;class i{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){const t=Object.keys(e).reduce((t,r)=>(t[r]=n.test(e[r])?e[r].split(n):e[r],t),{});return i.allColors=Object.assign({},i.allColors||{},t),i.allColors}addColors(e){return i.addColors(e)}colorize(e,t,r){if(void 0===r&&(r=t),!Array.isArray(i.allColors[e]))return gr[i.allColors[e]](r);for(let t=0,n=i.allColors[e].length;t<n;t++)r=gr[i.allColors[e][t]](r);return r}transform(e,n){return n.all&&"string"==typeof e[r]&&(e[r]=this.colorize(e[t],e.level,e[r])),(n.level||n.all||!n.message)&&(e.level=this.colorize(e[t],e.level)),(n.all||n.message)&&(e.message=this.colorize(e[t],e.level,e.message)),e}}e.exports=e=>new i(e),e.exports.Colorizer=e.exports.Format=i}));_r.Colorizer,_r.Format;const{Colorizer:Sr}=_r;var Er=e=>(Sr.addColors(e.colors||e),e),Mr=S((function(e,t){const r=t.format=tr;function n(e,t){t=t||e,Object.defineProperty(r,e,{get:()=>require(`./${t}.js`),configurable:!0})}t.levels=Er,n("align"),n("errors"),n("cli"),n("combine"),n("colorize"),n("json"),n("label"),n("logstash"),n("metadata"),n("ms"),n("padLevels","pad-levels"),n("prettyPrint","pretty-print"),n("printf"),n("simple"),n("splat"),n("timestamp"),n("uncolorize")})),xr=(Mr.format,Mr.levels,S((function(e,t){const{format:n}=r;t.warn={deprecated:e=>()=>{throw new Error(n("{ %s } was removed in winston@3.0.0.",e))},useFormat:e=>()=>{throw new Error([n("{ %s } was removed in winston@3.0.0.",e),"Use a custom winston.format = winston.format(function) instead."].join("\n"))},forFunctions(e,r,n){n.forEach(n=>{e[n]=t.warn[r](n)})},moved(e,t,r){function i(){return()=>{throw new Error([n("winston.%s was moved in winston@3.0.0.",r),n("Use a winston.%s instead.",t)].join("\n"))}}Object.defineProperty(e,r,{get:i,set:i})},forProperties(e,r,n){n.forEach(n=>{const i=t.warn[r](n);Object.defineProperty(e,n,{get:i,set:i})})}}}))),kr=(xr.warn,"sha512-oEXTISQnC8VlSAKf1KYSSd7J6IWuRPQqDdo8eoRNaYKLvwSb5+79Z3Yi1lrl6KDpU6/VWaxpakDAtb1oQ4n9aw=="),Rr={},Or={type:"range",registry:!0,raw:"winston@^3.3.3",name:"winston",escapedName:"winston",rawSpec:"^3.3.3",saveSpec:null,fetchSpec:"^3.3.3"},Cr=["/"],Tr="https://registry.npmjs.org/winston/-/winston-3.3.3.tgz",Pr="ae6172042cafb29786afa3d09c8ff833ab7c9170",jr="/media/dimkk/apps21/mine/opportunity/pg-worker2",Ar={name:"Charlie Robbins",email:"charlie.robbins@gmail.com"},Ir={url:"https://github.com/winstonjs/winston/issues"},Nr={"@dabh/diagnostics":"^2.0.2",async:"^3.1.0","is-stream":"^2.0.0",logform:"^2.2.0","one-time":"^1.0.0","readable-stream":"^3.4.0","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.4.0"},Lr={"@babel/cli":"^7.10.3","@babel/core":"^7.10.3","@babel/preset-env":"^7.10.3","@types/node":"^14.0.13","abstract-winston-transport":"^0.5.1",assume:"^2.2.0",colors:"^1.4.0","cross-spawn-async":"^2.2.5","eslint-config-populist":"^4.2.0",hock:"^1.4.1",mocha:"^8.0.1",nyc:"^15.1.0",rimraf:"^3.0.2",split2:"^3.1.1","std-mocks":"^1.0.1",through2:"^3.0.1","winston-compat":"^0.1.5"},Dr={node:">= 6.4.0"},qr="https://github.com/winstonjs/winston#readme",Br=["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],Fr=[{name:"Jarrett Cruger",email:"jcrugzz@gmail.com"},{name:"Chris Alderson",email:"chrisalderson@protonmail.com"},{name:"David Hyde",email:"dabh@stanford.edu"}],Qr={type:"git",url:"git+https://github.com/winstonjs/winston.git"},Ur={build:"rimraf dist && babel lib -d dist",lint:"populist lib/*.js lib/winston/*.js lib/winston/**/*.js",prepublishOnly:"npm run build",pretest:"npm run lint",test:"nyc --reporter=text --reporter lcov npm run test:mocha","test:mocha":"mocha test/*.test.js test/**/*.test.js --exit"},$r={_from:"winston@^3.3.3",_id:"winston@3.3.3",_inBundle:!1,_integrity:kr,_location:"/winston",_phantomChildren:Rr,_requested:Or,_requiredBy:Cr,_resolved:Tr,_shasum:Pr,_spec:"winston@^3.3.3",_where:jr,author:Ar,browser:"./dist/winston",bugs:Ir,bundleDependencies:!1,dependencies:Nr,deprecated:!1,description:"A logger for just about everything.",devDependencies:Lr,engines:Dr,homepage:qr,keywords:Br,license:"MIT",main:"./lib/winston",maintainers:Fr,name:"winston",repository:Qr,scripts:Ur,types:"./index.d.ts",version:"3.3.3"},Wr=Object.freeze({__proto__:null,_from:"winston@^3.3.3",_id:"winston@3.3.3",_inBundle:!1,_integrity:kr,_location:"/winston",_phantomChildren:Rr,_requested:Or,_requiredBy:Cr,_resolved:Tr,_shasum:Pr,_spec:"winston@^3.3.3",_where:jr,author:Ar,browser:"./dist/winston",bugs:Ir,bundleDependencies:!1,dependencies:Nr,deprecated:!1,description:"A logger for just about everything.",devDependencies:Lr,engines:Dr,homepage:qr,keywords:Br,license:"MIT",main:"./lib/winston",maintainers:Fr,name:"winston",repository:Qr,scripts:Ur,types:"./index.d.ts",version:"3.3.3",default:$r}),zr=S((function(e){"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,s,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick((function(){e.call(null,t)}));case 3:return process.nextTick((function(){e.call(null,t,r)}));case 4:return process.nextTick((function(){e.call(null,t,r,n)}));default:for(i=new Array(o-1),s=0;s<i.length;)i[s++]=arguments[s];return process.nextTick((function(){e.apply(null,i)}))}}}:e.exports=process}));zr.nextTick;function Gr(e){return Object.prototype.toString.call(e)}var Hr={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Gr(e)},isBoolean:function(e){return"boolean"==typeof e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e},isNumber:function(e){return"number"==typeof e},isString:function(e){return"string"==typeof e},isSymbol:function(e){return"symbol"==typeof e},isUndefined:function(e){return void 0===e},isRegExp:function(e){return"[object RegExp]"===Gr(e)},isObject:function(e){return"object"==typeof e&&null!==e},isDate:function(e){return"[object Date]"===Gr(e)},isError:function(e){return"[object Error]"===Gr(e)||e instanceof Error},isFunction:function(e){return"function"==typeof e},isPrimitive:function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},isBuffer:Buffer.isBuffer},Vr=S((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),Yr=S((function(e){try{var t=r;if("function"!=typeof t.inherits)throw"";e.exports=t.inherits}catch(t){e.exports=Vr}})),Kr=r.deprecate,Jr=o,Xr=S((function(e,t){var r=g.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=g:(n(g,t),t.Buffer=i),n(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return g.SlowBuffer(e)}}));Xr.Buffer;function Zr(e,t){e.emit("error",t)}var en=function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||zr.nextTick(Zr,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(zr.nextTick(Zr,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},tn=function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},rn={}.toString,nn=Array.isArray||function(e){return"[object Array]"==rn.call(e)},sn=S((function(e){var t=Xr.Buffer;e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return t.alloc(0);if(1===this.length)return this.head.data;for(var r,n,i,s=t.allocUnsafe(e>>>0),o=this.head,a=0;o;)r=o.data,n=s,i=a,r.copy(n,i),a+=o.data.length,o=o.next;return s},e}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})})),on=Xr.Buffer,an=on.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var ln=un;function un(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(on.isEncoding===an||!an(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=fn,this.end=dn,t=4;break;case"utf8":this.fillLast=hn,t=4;break;case"base64":this.text=pn,this.end=gn,t=3;break;default:return this.write=mn,void(this.end=bn)}this.lastNeed=0,this.lastTotal=0,this.lastChar=on.allocUnsafe(t)}function cn(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function hn(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function fn(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function dn(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function pn(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function gn(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function mn(e){return e.toString(this.encoding)}function bn(e){return e&&e.length?this.write(e):""}un.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},un.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},un.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=cn(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=cn(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=cn(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},un.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var yn,vn={StringDecoder:ln},wn=Cn;Cn.ReadableState=On;t.EventEmitter;var _n=function(e,t){return e.listeners(t).length},Sn=Xr.Buffer,En=w.Uint8Array||function(){};var Mn=Object.create(Hr);Mn.inherits=Yr;var xn,kn=void 0;kn=r&&r.debuglog?r.debuglog("stream"):function(){},Mn.inherits(Cn,Jr);var Rn=["error","close","destroy","pause","resume"];function On(e,t){e=e||{};var r=t instanceof(yn=yn||zn);this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(i||0===i)?i:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new sn,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(xn||(xn=vn.StringDecoder),this.decoder=new xn(e.encoding),this.encoding=e.encoding)}function Cn(e){if(yn=yn||zn,!(this instanceof Cn))return new Cn(e);this._readableState=new On(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Jr.call(this)}function Tn(e,t,r,n,i){var s,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,An(e)}(e,o)):(i||(s=function(e,t){var r;n=t,Sn.isBuffer(n)||n instanceof En||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===Sn.prototype||(t=function(e){return Sn.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Pn(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?Pn(e,o,t,!1):Nn(e,o)):Pn(e,o,t,!1))):n||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function Pn(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&An(e)),Nn(e,t)}Object.defineProperty(Cn.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Cn.prototype.destroy=en,Cn.prototype._undestroy=tn,Cn.prototype._destroy=function(e,t){this.push(null),t(e)},Cn.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Sn.from(e,t),t=""),r=!0),Tn(this,e,t,!1,r)},Cn.prototype.unshift=function(e){return Tn(this,e,null,!0,!1)},Cn.prototype.isPaused=function(){return!1===this._readableState.flowing},Cn.prototype.setEncoding=function(e){return xn||(xn=vn.StringDecoder),this._readableState.decoder=new xn(e),this._readableState.encoding=e,this};function jn(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function An(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(kn("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?zr.nextTick(In,e):In(e))}function In(e){kn("emit readable"),e.emit("readable"),Bn(e)}function Nn(e,t){t.readingMore||(t.readingMore=!0,zr.nextTick(Ln,e,t))}function Ln(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(kn("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function Dn(e){kn("readable nexttick read 0"),e.read(0)}function qn(e,t){t.reading||(kn("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Bn(e),t.flowing&&!t.reading&&e.read(0)}function Bn(e){var t=e._readableState;for(kn("flow",t.flowing);t.flowing&&null!==e.read(););}function Fn(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),0===(e-=o)){o===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=Sn.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,o),0===(e-=o)){o===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function Qn(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,zr.nextTick(Un,t,e))}function Un(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function $n(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Cn.prototype.read=function(e){kn("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return kn("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Qn(this):An(this),null;if(0===(e=jn(e,t))&&t.ended)return 0===t.length&&Qn(this),null;var n,i=t.needReadable;return kn("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&kn("length less than watermark",i=!0),t.ended||t.reading?kn("reading or ended",i=!1):i&&(kn("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=jn(r,t))),null===(n=e>0?Fn(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Qn(this)),null!==n&&this.emit("data",n),n},Cn.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Cn.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,kn("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?o:p;function s(t,i){kn("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,kn("cleanup"),e.removeListener("close",f),e.removeListener("finish",d),e.removeListener("drain",a),e.removeListener("error",h),e.removeListener("unpipe",s),r.removeListener("end",o),r.removeListener("end",p),r.removeListener("data",c),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a())}function o(){kn("onend"),e.end()}n.endEmitted?zr.nextTick(i):r.once("end",i),e.on("unpipe",s);var a=function(e){return function(){var t=e._readableState;kn("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&_n(e,"data")&&(t.flowing=!0,Bn(e))}}(r);e.on("drain",a);var l=!1;var u=!1;function c(t){kn("ondata"),u=!1,!1!==e.write(t)||u||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==$n(n.pipes,e))&&!l&&(kn("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,u=!0),r.pause())}function h(t){kn("onerror",t),p(),e.removeListener("error",h),0===_n(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",d),p()}function d(){kn("onfinish"),e.removeListener("close",f),p()}function p(){kn("unpipe"),r.unpipe(e)}return r.on("data",c),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?nn(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",f),e.once("finish",d),e.emit("pipe",r),n.flowing||(kn("pipe resume"),r.resume()),e},Cn.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,r);return this}var o=$n(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},Cn.prototype.on=function(e,t){var r=Jr.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&An(this):zr.nextTick(Dn,this))}return r},Cn.prototype.addListener=Cn.prototype.on,Cn.prototype.resume=function(){var e=this._readableState;return e.flowing||(kn("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,zr.nextTick(qn,e,t))}(this,e)),this},Cn.prototype.pause=function(){return kn("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(kn("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Cn.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(kn("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(kn("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<Rn.length;s++)e.on(Rn[s],this.emit.bind(this,Rn[s]));return this._read=function(t){kn("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(Cn.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Cn._fromList=Fn;var Wn=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},zn=Kn,Gn=Object.create(Hr);Gn.inherits=Yr,Gn.inherits(Kn,wn);for(var Hn=Wn(Zn.prototype),Vn=0;Vn<Hn.length;Vn++){var Yn=Hn[Vn];Kn.prototype[Yn]||(Kn.prototype[Yn]=Zn.prototype[Yn])}function Kn(e){if(!(this instanceof Kn))return new Kn(e);wn.call(this,e),Zn.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Jn)}function Jn(){this.allowHalfOpen||this._writableState.ended||zr.nextTick(Xn,this)}function Xn(e){e.end()}Object.defineProperty(Kn.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Kn.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),Kn.prototype._destroy=function(e,t){this.push(null),this.end(),zr.nextTick(t,e)};var Zn=ci;function ei(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}var ti,ri=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:zr.nextTick;ci.WritableState=ui;var ni=Object.create(Hr);ni.inherits=Yr;var ii,si={deprecate:Kr},oi=Xr.Buffer,ai=w.Uint8Array||function(){};function li(){}function ui(e,t){e=e||{};var r=t instanceof(ti=ti||zn);this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(i||0===i)?i:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(zr.nextTick(i,n),zr.nextTick(mi,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),mi(e,t))}(e,r,n,t,i);else{var s=pi(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||di(e,r),n?ri(fi,e,r,s,i):fi(e,r,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ei(this)}function ci(e){if(ti=ti||zn,!(ii.call(ci,this)||this instanceof ti))return new ci(e);this._writableState=new ui(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Jr.call(this)}function hi(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function fi(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),mi(e,t)}function di(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,hi(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new ei(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,c=r.callback;if(hi(e,t,!1,t.objectMode?1:l.length,l,u,c),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function pi(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function gi(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),mi(e,t)}))}function mi(e,t){var r=pi(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,zr.nextTick(gi,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}ni.inherits(ci,Jr),ui.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(ui.prototype,"buffer",{get:si.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(ii=Function.prototype[Symbol.hasInstance],Object.defineProperty(ci,Symbol.hasInstance,{value:function(e){return!!ii.call(this,e)||this===ci&&(e&&e._writableState instanceof ui)}})):ii=function(e){return e instanceof this},ci.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},ci.prototype.write=function(e,t,r){var n,i=this._writableState,s=!1,o=!i.objectMode&&(n=e,oi.isBuffer(n)||n instanceof ai);return o&&!oi.isBuffer(e)&&(e=function(e){return oi.from(e)}(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=li),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),zr.nextTick(t,r)}(this,r):(o||function(e,t,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),zr.nextTick(n,s),i=!1),i}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=oi.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else hi(e,t,!1,a,n,i,s);return l}(this,i,o,e,t,r)),s},ci.prototype.cork=function(){this._writableState.corked++},ci.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||di(this,e))},ci.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(ci.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ci.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},ci.prototype._writev=null,ci.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,mi(e,t),r&&(t.finished?zr.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(ci.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),ci.prototype.destroy=en,ci.prototype._undestroy=tn,ci.prototype._destroy=function(e,t){this.end(),t(e)};var bi=S((function(e){"disable"===process.env.READABLE_STREAM?e.exports=o&&o.Writable||Zn:e.exports=Zn})),yi=S((function(e){const{LEVEL:t}=wr,n=e.exports=function(e={}){if(vi.call(this,e),!e.transport||"function"!=typeof e.transport.log)throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=function(e){this.emit("error",e,this.transport)}.bind(this),this.transport.on("error",this.transport.__winstonError))};r.inherits(n,vi),n.prototype._write=function(e,r,n){if(this.silent||!0===e.exception&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[t]])&&this.transport.log(e[t],e.message,e,this._nop),n(null)},n.prototype._writev=function(e,r){for(let r=0;r<e.length;r++)this._accept(e[r])&&(this.transport.log(e[r].chunk[t],e[r].chunk.message,e[r].chunk,this._nop),e[r].callback());return r(null)},n.prototype._deprecated=function(){console.error([this.transport.name+" is a legacy winston transport. Consider upgrading: ","- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join("\n"))},n.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}})),vi=S((function(e){const{LEVEL:t}=wr,n=e.exports=function(e={}){bi.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",e=>{this.levels=e.levels,this.parent=e}),this.once("unpipe",e=>{e===this.parent&&(this.parent=null,this.close&&this.close())})};r.inherits(n,bi),n.prototype._write=function(e,r,n){if(this.silent||!0===e.exception&&!this.handleExceptions)return n(null);const i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[t]]){if(e&&!this.format)return this.log(e,n);let t,r;try{r=this.format.transform(Object.assign({},e),this.format.options)}catch(e){t=e}if(t||!r){if(n(),t)throw t;return}return this.log(r,n)}return n(null)},n.prototype._writev=function(e,t){if(this.logv){const r=e.filter(this._accept,this);return r.length?this.logv(r,t):t(null)}for(let r=0;r<e.length;r++){if(!this._accept(e[r]))continue;if(e[r].chunk&&!this.format){this.log(e[r].chunk,e[r].callback);continue}let n,i;try{i=this.format.transform(Object.assign({},e[r].chunk),this.format.options)}catch(e){n=e}if(n||!i){if(e[r].callback(),n)throw t(null),n}else this.log(i,e[r].callback)}return t(null)},n.prototype._accept=function(e){const r=e.chunk;if(this.silent)return!1;const n=this.level||this.parent&&this.parent.level;return!(!0!==r.exception&&n&&!(this.levels[n]>=this.levels[r[t]])||!this.handleExceptions&&!0===r.exception)},n.prototype._nop=function(){},e.exports.LegacyTransportStream=yi}));vi.LegacyTransportStream;const{LEVEL:wi,MESSAGE:_i}=wr;var Si=class extends vi{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=e.eol||p.EOL,this.setMaxListeners(30)}log(e,t){return setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[wi]]?(console._stderr?console._stderr.write(`${e[_i]}${this.eol}`):console.error(e[_i]),void(t&&t())):this.consoleWarnLevels[e[wi]]?(console._stderr?console._stderr.write(`${e[_i]}${this.eol}`):console.warn(e[_i]),void(t&&t())):(console._stdout?console._stdout.write(`${e[_i]}${this.eol}`):console.log(e[_i]),void(t&&t()))}_stringArrayToSet(e,t){if(!e)return{};if(t=t||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(t);return e.reduce((e,r)=>{if("string"!=typeof r)throw new Error(t);return e[r]=!0,e},{})}},Ei=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&"number"==typeof e.length&&e.length>=0&&e.length%1==0},e.exports=t.default}));_(Ei);var Mi=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(...t){var r=t.pop();return e.call(this,t,r)}},e.exports=t.default}));_(Mi);var xi=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fallback=s,t.wrap=o;var r,n=t.hasSetImmediate="function"==typeof setImmediate&&setImmediate,i=t.hasNextTick="object"==typeof process&&"function"==typeof process.nextTick;function s(e){setTimeout(e,0)}function o(e){return(t,...r)=>e(()=>t(...r))}r=n?setImmediate:i?process.nextTick:s,t.default=o(r)}));_(xi);xi.fallback,xi.wrap,xi.hasSetImmediate,xi.hasNextTick;var ki=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,Ri.isAsync)(e))return function(...t){const r=t.pop();return s(e.apply(this,t),r)};return(0,r.default)((function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}if(n&&"function"==typeof n.then)return s(n,r);r(null,n)}))};var r=i(Mi),n=i(xi);function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return e.then(e=>{o(t,null,e)},e=>{o(t,e&&e.message?e:new Error(e))})}function o(e,t,r){try{e(t,r)}catch(e){(0,n.default)(e=>{throw e},e)}}e.exports=t.default}));_(ki);var Ri=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=t.isAsyncGenerator=t.isAsync=void 0;var r,n=(r=ki)&&r.__esModule?r:{default:r};function i(e){return"AsyncFunction"===e[Symbol.toStringTag]}t.default=function(e){if("function"!=typeof e)throw new Error("expected a function");return i(e)?(0,n.default)(e):e},t.isAsync=i,t.isAsyncGenerator=function(e){return"AsyncGenerator"===e[Symbol.toStringTag]},t.isAsyncIterable=function(e){return"function"==typeof e[Symbol.asyncIterator]}}));_(Ri);Ri.isAsyncIterable,Ri.isAsyncGenerator,Ri.isAsync;var Oi=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=e.length){if(!t)throw new Error("arity is undefined");return function(...r){return"function"==typeof r[t-1]?e.apply(this,r):new Promise((n,i)=>{r[t-1]=(e,...t)=>{if(e)return i(e);n(t.length>1?t:t[0])},e.apply(this,r)})}},e.exports=t.default}));_(Oi);var Ci=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(Ei),n=s(Ri),i=s(Oi);function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((e,t,i)=>{var s=(0,r.default)(t)?[]:{};e(t,(e,t,r)=>{(0,n.default)(e)((e,...n)=>{n.length<2&&([n]=n),s[t]=n,r(e)})},e=>i(e,s))},3),e.exports=t.default}));_(Ci);var Ti=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(...t){if(null!==e){var r=e;e=null,r.apply(this,t)}}return Object.assign(t,e),t},e.exports=t.default}));_(Ti);var Pi=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()},e.exports=t.default}));_(Pi);var ji=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,r.default)(e))return function(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}(e);var t=(0,n.default)(e);return t?function(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}(t):(i=e,s=i?Object.keys(i):[],o=-1,a=s.length,function(){var e=s[++o];return o<a?{value:i[e],key:e}:null});var i,s,o,a};var r=i(Ei),n=i(Pi);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default}));_(ji);var Ai=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(...t){if(null===e)throw new Error("Callback was already called.");var r=e;e=null,r.apply(this,t)}},e.exports=t.default}));_(Ai);var Ii=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={},e.exports=t.default}));_(Ii);var Ni=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i){let s=!1,o=!1,a=!1,l=0,u=0;function c(){l>=t||a||s||(a=!0,e.next().then(({value:e,done:t})=>{if(!o&&!s){if(a=!1,t)return s=!0,void(l<=0&&i(null));l++,r(e,u,h),u++,c()}}).catch(f))}function h(e,t){if(l-=1,!o)return e?f(e):!1===e?(s=!0,void(o=!0)):t===n.default||s&&l<=0?(s=!0,i(null)):void c()}function f(e){o||(a=!1,s=!0,i(e))}c()};var r,n=(r=Ii)&&r.__esModule?r:{default:r};e.exports=t.default}));_(Ni);var Li=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(Ti),n=a(ji),i=a(Ai),s=a(Ni),o=a(Ii);function a(e){return e&&e.__esModule?e:{default:e}}t.default=e=>(t,a,l)=>{if(l=(0,r.default)(l),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return l(null);if((0,Ri.isAsyncGenerator)(t))return(0,s.default)(t,e,a,l);if((0,Ri.isAsyncIterable)(t))return(0,s.default)(t[Symbol.asyncIterator](),e,a,l);var u=(0,n.default)(t),c=!1,h=!1,f=0,d=!1;function p(e,t){if(!h)if(f-=1,e)c=!0,l(e);else if(!1===e)c=!0,h=!0;else{if(t===o.default||c&&f<=0)return c=!0,l(null);d||g()}}function g(){for(d=!0;f<e&&!c;){var t=u();if(null===t)return c=!0,void(f<=0&&l(null));f+=1,a(t.value,t.key,(0,i.default)(p))}d=!1}g()},e.exports=t.default}));_(Li);var Di=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(Li),n=s(Ri),i=s(Oi);function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((function(e,t,i,s){return(0,r.default)(t)(e,(0,n.default)(i),s)}),4),e.exports=t.default}));_(Di);var qi=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(Di),n=i(Oi);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)((function(e,t,n){return(0,r.default)(e,1,t,n)}),3),e.exports=t.default}));_(qi);var Bi=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(n.default,e,t)};var r=i(Ci),n=i(qi);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default}));_(Bi);var Fi=o;function Qi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ui(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wi=g.Buffer,zi=r.inspect,Gi=zi&&zi.custom||"inspect";var Hi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return Wi.alloc(0);for(var t,r,n,i=Wi.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,r=i,n=o,Wi.prototype.copy.call(t,r,n),o+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=Wi.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:Gi,value:function(e,t){return zi(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(r),!0).forEach((function(t){Ui(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&$i(t.prototype,r),n&&$i(t,n),e}();function Vi(e,t){Ki(e,t),Yi(e)}function Yi(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function Ki(e,t){e.emit("error",t)}var Ji=function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Ki,this,e)):process.nextTick(Ki,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?process.nextTick(Yi,r):(r._writableState.errorEmitted=!0,process.nextTick(Vi,r,e)):process.nextTick(Vi,r,e):t?(process.nextTick(Yi,r),t(e)):process.nextTick(Yi,r)})),this)},Xi=function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},Zi=function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)};const es={};function ts(e,t,r){r||(r=Error);class n extends r{constructor(e,r,n){super(function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(e,r,n))}}n.prototype.name=r.name,n.prototype.code=e,es[e]=n}function rs(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map(e=>String(e)),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}ts("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),ts("ERR_INVALID_ARG_TYPE",(function(e,t,r){let n;var i,s;let o;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o=`The ${e} ${n} ${rs(t,"type")}`;else{o=`The "${e}" ${function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument"} ${n} ${rs(t,"type")}`}return o+=". Received type "+typeof r,o}),TypeError),ts("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ts("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),ts("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ts("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),ts("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ts("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ts("ERR_STREAM_WRITE_AFTER_END","write after end"),ts("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ts("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),ts("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var ns={codes:es},is=ns.codes.ERR_INVALID_OPT_VALUE;var ss,os=function(e,t,r,n){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new is(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384},as=ks;function ls(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}ks.WritableState=xs;var us={deprecate:Kr},cs=g.Buffer,hs=w.Uint8Array||function(){};var fs,ds=os,ps=ns.codes,gs=ps.ERR_INVALID_ARG_TYPE,ms=ps.ERR_METHOD_NOT_IMPLEMENTED,bs=ps.ERR_MULTIPLE_CALLBACK,ys=ps.ERR_STREAM_CANNOT_PIPE,vs=ps.ERR_STREAM_DESTROYED,ws=ps.ERR_STREAM_NULL_VALUES,_s=ps.ERR_STREAM_WRITE_AFTER_END,Ss=ps.ERR_UNKNOWN_ENCODING,Es=Zi;function Ms(){}function xs(e,t,r){ss=ss||Is,e=e||{},"boolean"!=typeof r&&(r=t instanceof ss),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=ds(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new bs;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(js,e,t),e._writableState.errorEmitted=!0,Es(e,n)):(i(n),e._writableState.errorEmitted=!0,Es(e,n),js(e,t))}(e,r,n,t,i);else{var s=Ts(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||Cs(e,r),n?process.nextTick(Os,e,r,s,i):Os(e,r,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new ls(this)}function ks(e){var t=this instanceof(ss=ss||Is);if(!t&&!fs.call(ks,this))return new ks(e);this._writableState=new xs(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Fi.call(this)}function Rs(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new vs("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function Os(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),js(e,t)}function Cs(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,Rs(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new ls(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,c=r.callback;if(Rs(e,t,!1,t.objectMode?1:l.length,l,u,c),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function Ts(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function Ps(e,t){e._final((function(r){t.pendingcb--,r&&Es(e,r),t.prefinished=!0,e.emit("prefinish"),js(e,t)}))}function js(e,t){var r=Ts(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(Ps,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}Yr(ks,Fi),xs.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(xs.prototype,"buffer",{get:us.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(fs=Function.prototype[Symbol.hasInstance],Object.defineProperty(ks,Symbol.hasInstance,{value:function(e){return!!fs.call(this,e)||this===ks&&(e&&e._writableState instanceof xs)}})):fs=function(e){return e instanceof this},ks.prototype.pipe=function(){Es(this,new ys)},ks.prototype.write=function(e,t,r){var n,i=this._writableState,s=!1,o=!i.objectMode&&(n=e,cs.isBuffer(n)||n instanceof hs);return o&&!cs.isBuffer(e)&&(e=function(e){return cs.from(e)}(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=Ms),i.ending?function(e,t){var r=new _s;Es(e,r),process.nextTick(t,r)}(this,r):(o||function(e,t,r,n){var i;return null===r?i=new ws:"string"==typeof r||t.objectMode||(i=new gs("chunk",["string","Buffer"],r)),!i||(Es(e,i),process.nextTick(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=cs.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Rs(e,t,!1,a,n,i,s);return l}(this,i,o,e,t,r)),s},ks.prototype.cork=function(){this._writableState.corked++},ks.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||Cs(this,e))},ks.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Ss(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(ks.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ks.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ks.prototype._write=function(e,t,r){r(new ms("_write()"))},ks.prototype._writev=null,ks.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,js(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(ks.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ks.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),ks.prototype.destroy=Ji,ks.prototype._undestroy=Xi,ks.prototype._destroy=function(e,t){t(e)};var As=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},Is=qs;Yr(qs,Ro);for(var Ns=As(as.prototype),Ls=0;Ls<Ns.length;Ls++){var Ds=Ns[Ls];qs.prototype[Ds]||(qs.prototype[Ds]=as.prototype[Ds])}function qs(e){if(!(this instanceof qs))return new qs(e);Ro.call(this,e),as.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",Bs)))}function Bs(){this._writableState.ended||process.nextTick(Fs,this)}function Fs(e){e.end()}Object.defineProperty(qs.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(qs.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(qs.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(qs.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var Qs=S((function(e,t){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=g.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=g:(n(g,t),t.Buffer=i),i.prototype=Object.create(r.prototype),n(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return g.SlowBuffer(e)}})),Us=(Qs.Buffer,Qs.Buffer),$s=Us.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var Ws=zs;function zs(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(Us.isEncoding===$s||!$s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=Vs,this.end=Ys,t=4;break;case"utf8":this.fillLast=Hs,t=4;break;case"base64":this.text=Ks,this.end=Js,t=3;break;default:return this.write=Xs,void(this.end=Zs)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Us.allocUnsafe(t)}function Gs(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function Hs(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function Vs(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Ys(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Ks(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Js(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Xs(e){return e.toString(this.encoding)}function Zs(e){return e&&e.length?this.write(e):""}zs.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},zs.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},zs.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=Gs(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=Gs(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=Gs(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},zs.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var eo={StringDecoder:Ws},to=ns.codes.ERR_STREAM_PREMATURE_CLOSE;function ro(){}var no,io=function e(t,r,n){if("function"==typeof r)return e(t,null,r);r||(r={}),n=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(n||ro);var i=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,o=function(){t.writable||l()},a=t._writableState&&t._writableState.finished,l=function(){s=!1,a=!0,i||n.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){i=!1,u=!0,s||n.call(t)},h=function(e){n.call(t,e)},f=function(){var e;return i&&!u?(t._readableState&&t._readableState.ended||(e=new to),n.call(t,e)):s&&!a?(t._writableState&&t._writableState.ended||(e=new to),n.call(t,e)):void 0},d=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",o),t.on("close",o)):(t.on("complete",l),t.on("abort",f),t.req?d():t.on("request",d)),t.on("end",c),t.on("finish",l),!1!==r.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",l),t.removeListener("abort",f),t.removeListener("request",d),t.req&&t.req.removeListener("finish",l),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",l),t.removeListener("end",c),t.removeListener("error",h),t.removeListener("close",f)}};function so(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oo=Symbol("lastResolve"),ao=Symbol("lastReject"),lo=Symbol("error"),uo=Symbol("ended"),co=Symbol("lastPromise"),ho=Symbol("handlePromise"),fo=Symbol("stream");function po(e,t){return{value:e,done:t}}function go(e){var t=e[oo];if(null!==t){var r=e[fo].read();null!==r&&(e[co]=null,e[oo]=null,e[ao]=null,t(po(r,!1)))}}function mo(e){process.nextTick(go,e)}var bo=Object.getPrototypeOf((function(){})),yo=Object.setPrototypeOf((so(no={get stream(){return this[fo]},next:function(){var e=this,t=this[lo];if(null!==t)return Promise.reject(t);if(this[uo])return Promise.resolve(po(void 0,!0));if(this[fo].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[lo]?r(e[lo]):t(po(void 0,!0))}))}));var r,n=this[co];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[uo]?r(po(void 0,!0)):t[ho](r,n)}),n)}}(n,this));else{var i=this[fo].read();if(null!==i)return Promise.resolve(po(i,!1));r=new Promise(this[ho])}return this[co]=r,r}},Symbol.asyncIterator,(function(){return this})),so(no,"return",(function(){var e=this;return new Promise((function(t,r){e[fo].destroy(null,(function(e){e?r(e):t(po(void 0,!0))}))}))})),no),bo),vo=function(e){var t,r=Object.create(yo,(so(t={},fo,{value:e,writable:!0}),so(t,oo,{value:null,writable:!0}),so(t,ao,{value:null,writable:!0}),so(t,lo,{value:null,writable:!0}),so(t,uo,{value:e._readableState.endEmitted,writable:!0}),so(t,ho,{value:function(e,t){var n=r[fo].read();n?(r[co]=null,r[oo]=null,r[ao]=null,e(po(n,!1))):(r[oo]=e,r[ao]=t)},writable:!0}),t));return r[co]=null,io(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[ao];return null!==t&&(r[co]=null,r[oo]=null,r[ao]=null,t(e)),void(r[lo]=e)}var n=r[oo];null!==n&&(r[co]=null,r[oo]=null,r[ao]=null,n(po(void 0,!0))),r[uo]=!0})),e.on("readable",mo.bind(null,r)),r};function wo(e,t,r,n,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}function _o(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function o(e){wo(s,n,i,o,a,"next",e)}function a(e){wo(s,n,i,o,a,"throw",e)}o(void 0)}))}}function So(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Eo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mo=ns.codes.ERR_INVALID_ARG_TYPE;var xo,ko=function(e,t,r){var n;if(t&&"function"==typeof t.next)n=t;else if(t&&t[Symbol.asyncIterator])n=t[Symbol.asyncIterator]();else{if(!t||!t[Symbol.iterator])throw new Mo("iterable",["Iterable"],t);n=t[Symbol.iterator]()}var i=new e(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?So(Object(r),!0).forEach((function(t){Eo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({objectMode:!0},r)),s=!1;function o(){return a.apply(this,arguments)}function a(){return(a=_o((function*(){try{var e=yield n.next(),t=e.value;e.done?i.push(null):i.push(yield t)?o():s=!1}catch(e){i.destroy(e)}}))).apply(this,arguments)}return i._read=function(){s||(s=!0,o())},i},Ro=Wo;Wo.ReadableState=$o;t.EventEmitter;var Oo,Co=function(e,t){return e.listeners(t).length},To=g.Buffer,Po=w.Uint8Array||function(){};Oo=r&&r.debuglog?r.debuglog("stream"):function(){};var jo,Ao,Io,No=os,Lo=ns.codes,Do=Lo.ERR_INVALID_ARG_TYPE,qo=Lo.ERR_STREAM_PUSH_AFTER_EOF,Bo=Lo.ERR_METHOD_NOT_IMPLEMENTED,Fo=Lo.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Yr(Wo,Fi);var Qo=Zi,Uo=["error","close","destroy","pause","resume"];function $o(e,t,r){xo=xo||Is,e=e||{},"boolean"!=typeof r&&(r=t instanceof xo),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=No(this,e,"readableHighWaterMark",r),this.buffer=new Hi,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(jo||(jo=eo.StringDecoder),this.decoder=new jo(e.encoding),this.encoding=e.encoding)}function Wo(e){if(xo=xo||Is,!(this instanceof Wo))return new Wo(e);var t=this instanceof xo;this._readableState=new $o(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Fi.call(this)}function zo(e,t,r,n,i){Oo("readableAddChunk",t);var s,o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(Oo("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?Vo(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,Yo(e)))}(e,o);else if(i||(s=function(e,t){var r;n=t,To.isBuffer(n)||n instanceof Po||"string"==typeof t||void 0===t||e.objectMode||(r=new Do("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(o,t)),s)Qo(e,s);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===To.prototype||(t=function(e){return To.from(e)}(t)),n)o.endEmitted?Qo(e,new Fo):Go(e,o,t,!0);else if(o.ended)Qo(e,new qo);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?Go(e,o,t,!1):Ko(e,o)):Go(e,o,t,!1)}else n||(o.reading=!1,Ko(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function Go(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Vo(e)),Ko(e,t)}Object.defineProperty(Wo.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Wo.prototype.destroy=Ji,Wo.prototype._undestroy=Xi,Wo.prototype._destroy=function(e,t){t(e)},Wo.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=To.from(e,t),t=""),r=!0),zo(this,e,t,!1,r)},Wo.prototype.unshift=function(e){return zo(this,e,null,!0,!1)},Wo.prototype.isPaused=function(){return!1===this._readableState.flowing},Wo.prototype.setEncoding=function(e){jo||(jo=eo.StringDecoder);var t=new jo(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};function Ho(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function Vo(e){var t=e._readableState;Oo("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(Oo("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(Yo,e))}function Yo(e){var t=e._readableState;Oo("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ta(e)}function Ko(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(Jo,e,t))}function Jo(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(Oo("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function Xo(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function Zo(e){Oo("readable nexttick read 0"),e.read(0)}function ea(e,t){Oo("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ta(e),t.flowing&&!t.reading&&e.read(0)}function ta(e){var t=e._readableState;for(Oo("flow",t.flowing);t.flowing&&null!==e.read(););}function ra(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function na(e){var t=e._readableState;Oo("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(ia,t,e))}function ia(e,t){if(Oo("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function sa(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Wo.prototype.read=function(e){Oo("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return Oo("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?na(this):Vo(this),null;if(0===(e=Ho(e,t))&&t.ended)return 0===t.length&&na(this),null;var n,i=t.needReadable;return Oo("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&Oo("length less than watermark",i=!0),t.ended||t.reading?Oo("reading or ended",i=!1):i&&(Oo("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Ho(r,t))),null===(n=e>0?ra(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&na(this)),null!==n&&this.emit("data",n),n},Wo.prototype._read=function(e){Qo(this,new Bo("_read()"))},Wo.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,Oo("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?o:d;function s(t,i){Oo("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,Oo("cleanup"),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("drain",a),e.removeListener("error",c),e.removeListener("unpipe",s),r.removeListener("end",o),r.removeListener("end",d),r.removeListener("data",u),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a())}function o(){Oo("onend"),e.end()}n.endEmitted?process.nextTick(i):r.once("end",i),e.on("unpipe",s);var a=function(e){return function(){var t=e._readableState;Oo("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&Co(e,"data")&&(t.flowing=!0,ta(e))}}(r);e.on("drain",a);var l=!1;function u(t){Oo("ondata");var i=e.write(t);Oo("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==sa(n.pipes,e))&&!l&&(Oo("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function c(t){Oo("onerror",t),d(),e.removeListener("error",c),0===Co(e,"error")&&Qo(e,t)}function h(){e.removeListener("finish",f),d()}function f(){Oo("onfinish"),e.removeListener("close",h),d()}function d(){Oo("unpipe"),r.unpipe(e)}return r.on("data",u),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",c),e.once("close",h),e.once("finish",f),e.emit("pipe",r),n.flowing||(Oo("pipe resume"),r.resume()),e},Wo.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=sa(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},Wo.prototype.on=function(e,t){var r=Fi.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Oo("on readable",n.length,n.reading),n.length?Vo(this):n.reading||process.nextTick(Zo,this))),r},Wo.prototype.addListener=Wo.prototype.on,Wo.prototype.removeListener=function(e,t){var r=Fi.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(Xo,this),r},Wo.prototype.removeAllListeners=function(e){var t=Fi.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(Xo,this),t},Wo.prototype.resume=function(){var e=this._readableState;return e.flowing||(Oo("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(ea,e,t))}(this,e)),e.paused=!1,this},Wo.prototype.pause=function(){return Oo("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Oo("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Wo.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(Oo("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(Oo("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<Uo.length;s++)e.on(Uo[s],this.emit.bind(this,Uo[s]));return this._read=function(t){Oo("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(Wo.prototype[Symbol.asyncIterator]=function(){return void 0===Ao&&(Ao=vo),Ao(this)}),Object.defineProperty(Wo.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Wo.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Wo.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Wo._fromList=ra,Object.defineProperty(Wo.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Wo.from=function(e,t){return void 0===Io&&(Io=ko),Io(Wo,e,t)});var oa=da,aa=ns.codes,la=aa.ERR_METHOD_NOT_IMPLEMENTED,ua=aa.ERR_MULTIPLE_CALLBACK,ca=aa.ERR_TRANSFORM_ALREADY_TRANSFORMING,ha=aa.ERR_TRANSFORM_WITH_LENGTH_0;function fa(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new ua);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function da(e){if(!(this instanceof da))return new da(e);Is.call(this,e),this._transformState={afterTransform:fa.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",pa)}function pa(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?ga(this,null,null):this._flush((function(t,r){ga(e,t,r)}))}function ga(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new ha;if(e._transformState.transforming)throw new ca;return e.push(null)}Yr(da,Is),da.prototype.push=function(e,t){return this._transformState.needTransform=!1,Is.prototype.push.call(this,e,t)},da.prototype._transform=function(e,t,r){r(new la("_transform()"))},da.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},da.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},da.prototype._destroy=function(e,t){Is.prototype._destroy.call(this,e,(function(e){t(e)}))};var ma,ba=ya;function ya(e){if(!(this instanceof ya))return new ya(e);oa.call(this,e)}Yr(ya,oa),ya.prototype._transform=function(e,t,r){r(null,e)};var va=ns.codes,wa=va.ERR_MISSING_ARGS,_a=va.ERR_STREAM_DESTROYED;function Sa(e){if(e)throw e}function Ea(e,t,r,n){n=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(n);var i=!1;e.on("close",(function(){i=!0})),void 0===ma&&(ma=io),ma(e,{readable:t,writable:r},(function(e){if(e)return n(e);i=!0,n()}));var s=!1;return function(t){if(!i&&!s)return s=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new _a("pipe"))}}function Ma(e){e()}function xa(e,t){return e.pipe(t)}function ka(e){return e.length?"function"!=typeof e[e.length-1]?Sa:e.pop():Sa}var Ra=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=ka(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new wa("streams");var s=t.map((function(e,r){var o=r<t.length-1;return Ea(e,o,r>0,(function(e){n||(n=e),e&&s.forEach(Ma),o||(s.forEach(Ma),i(n))}))}));return t.reduce(xa)},Oa=S((function(e,t){"disable"===process.env.READABLE_STREAM&&o?(e.exports=o.Readable,Object.assign(e.exports,o),e.exports.Stream=o):((t=e.exports=Ro).Stream=o||t,t.Readable=t,t.Writable=as,t.Duplex=Is,t.Transform=oa,t.PassThrough=ba,t.finished=io,t.pipeline=Ra)})),Ca=(Oa.Stream,Oa.Readable,Oa.Writable,Oa.Duplex,Oa.Transform,Oa.PassThrough,Oa.finished,Oa.pipeline,[]),Ta=[],Pa=function(){};function ja(e){return!~Ca.indexOf(e)&&(Ca.push(e),!0)}function Aa(e){Pa=e}function Ia(e){for(var t=[],r=0;r<Ca.length;r++)if(Ca[r].async)t.push(Ca[r]);else if(Ca[r](e))return!0;return!!t.length&&new Promise((function(r){Promise.all(t.map((function(t){return t(e)}))).then((function(e){r(e.some(Boolean))}))}))}function Na(e){return!~Ta.indexOf(e)&&(Ta.push(e),!0)}function La(){Pa.apply(Pa,arguments)}function Da(e){for(var t=0;t<Ta.length;t++)e=Ta[t].apply(Ta[t],arguments);return e}function qa(e,t){var r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e}function Ba(e){return e.enabled=!1,e.modify=Na,e.set=Aa,e.use=ja,qa((function(){return!1}),e)}function Fa(e){return e.enabled=!0,e.modify=Na,e.set=Aa,e.use=ja,qa((function(){var t=Array.prototype.slice.call(arguments,0);return La.call(La,e,Da(t,e)),!0}),e)}var Qa=function(e){return e.introduce=qa,e.enabled=Ia,e.process=Da,e.modify=Na,e.write=La,e.nope=Ba,e.yep=Fa,e.set=Aa,e.use=ja,e},Ua=Qa((function e(t,r){return(r=r||{}).namespace=t,r.prod=!0,r.dev=!1,r.force||e.force?e.yep(r):e.nope(r)})),$a={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Wa=S((function(e){var t=Array.prototype.concat,r=Array.prototype.slice,n=e.exports=function(e){for(var n,i=[],s=0,o=e.length;s<o;s++){var a=e[s];(n=a)&&"string"!=typeof n&&(n instanceof Array||Array.isArray(n)||n.length>=0&&(n.splice instanceof Function||Object.getOwnPropertyDescriptor(n,n.length-1)&&"String"!==n.constructor.name))?i=t.call(i,r.call(a)):i.push(a)}return i};n.wrap=function(e){return function(){return e(n(arguments))}}})),za=S((function(e){var t={};for(var r in $a)$a.hasOwnProperty(r)&&(t[$a[r]]=r);var n=e.exports={to:{},get:{}};function i(e,t,r){return Math.min(Math.max(t,e),r)}function s(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}n.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=n.get.hsl(e),r="hsl";break;case"hwb":t=n.get.hwb(e),r="hwb";break;default:t=n.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},n.get.rgb=function(e){if(!e)return null;var t,r,n,s=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(n=t[2],t=t[1],r=0;r<3;r++){var o=2*r;s[r]=parseInt(t.slice(o,o+2),16)}n&&(s[3]=Math.round(parseInt(n,16)/255*100)/100)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(n=(t=t[1])[3],r=0;r<3;r++)s[r]=parseInt(t[r]+t[r],16);n&&(s[3]=Math.round(parseInt(n+n,16)/255*100)/100)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(r=0;r<3;r++)s[r]=parseInt(t[r+1],0);t[4]&&(s[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(s=$a[t[1]])?(s[3]=1,s):null:null;for(r=0;r<3;r++)s[r]=Math.round(2.55*parseFloat(t[r+1]));t[4]&&(s[3]=parseFloat(t[4]))}for(r=0;r<3;r++)s[r]=i(s[r],0,255);return s[3]=i(s[3],0,1),s},n.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,i(parseFloat(t[2]),0,100),i(parseFloat(t[3]),0,100),i(isNaN(r)?1:r,0,1)]}return null},n.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,i(parseFloat(t[2]),0,100),i(parseFloat(t[3]),0,100),i(isNaN(r)?1:r,0,1)]}return null},n.to.hex=function(){var e=Wa(arguments);return"#"+s(e[0])+s(e[1])+s(e[2])+(e[3]<1?s(Math.round(255*e[3])):"")},n.to.rgb=function(){var e=Wa(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},n.to.rgb.percent=function(){var e=Wa(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"},n.to.hsl=function(){var e=Wa(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},n.to.hwb=function(){var e=Wa(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},n.to.keyword=function(e){return t[e.slice(0,3)]}})),Ga=(za.to,za.get,S((function(e){var t={};for(var r in $a)$a.hasOwnProperty(r)&&(t[$a[r]]=r);var n=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in n)if(n.hasOwnProperty(i)){if(!("channels"in n[i]))throw new Error("missing channels property: "+i);if(!("labels"in n[i]))throw new Error("missing channel labels property: "+i);if(n[i].labels.length!==n[i].channels)throw new Error("channel and label counts mismatch: "+i);var s=n[i].channels,o=n[i].labels;delete n[i].channels,delete n[i].labels,Object.defineProperty(n[i],"channels",{value:s}),Object.defineProperty(n[i],"labels",{value:o})}n.rgb.hsl=function(e){var t,r,n=e[0]/255,i=e[1]/255,s=e[2]/255,o=Math.min(n,i,s),a=Math.max(n,i,s),l=a-o;return a===o?t=0:n===a?t=(i-s)/l:i===a?t=2+(s-n)/l:s===a&&(t=4+(n-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),r=(o+a)/2,[t,100*(a===o?0:r<=.5?l/(a+o):l/(2-a-o)),100*r]},n.rgb.hsv=function(e){var t,r,n,i,s,o=e[0]/255,a=e[1]/255,l=e[2]/255,u=Math.max(o,a,l),c=u-Math.min(o,a,l),h=function(e){return(u-e)/6/c+.5};return 0===c?i=s=0:(s=c/u,t=h(o),r=h(a),n=h(l),o===u?i=n-r:a===u?i=1/3+t-n:l===u&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*s,100*u]},n.rgb.hwb=function(e){var t=e[0],r=e[1],i=e[2];return[n.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(r,i))),100*(i=1-1/255*Math.max(t,Math.max(r,i)))]},n.rgb.cmyk=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-i)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},n.rgb.keyword=function(e){var r=t[e];if(r)return r;var n,i,s,o=1/0;for(var a in $a)if($a.hasOwnProperty(a)){var l=$a[a],u=(i=e,s=l,Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)+Math.pow(i[2]-s[2],2));u<o&&(o=u,n=a)}return n},n.keyword.rgb=function(e){return $a[e]},n.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},n.rgb.lab=function(e){var t=n.rgb.xyz(e),r=t[0],i=t[1],s=t[2];return i/=100,s/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(r-i),200*(i-(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116))]},n.hsl.rgb=function(e){var t,r,n,i,s,o=e[0]/360,a=e[1]/100,l=e[2]/100;if(0===a)return[s=255*l,s,s];t=2*l-(r=l<.5?l*(1+a):l+a-l*a),i=[0,0,0];for(var u=0;u<3;u++)(n=o+1/3*-(u-1))<0&&n++,n>1&&n--,s=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,i[u]=255*s;return i},n.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=r,s=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,i*=s<=1?s:2-s,[t,100*(0===n?2*i/(s+i):2*r/(n+r)),100*((n+r)/2)]},n.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,s=t-Math.floor(t),o=255*n*(1-r),a=255*n*(1-r*s),l=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,l,o];case 1:return[a,n,o];case 2:return[o,n,l];case 3:return[o,a,n];case 4:return[l,o,n];case 5:return[n,o,a]}},n.hsv.hsl=function(e){var t,r,n,i=e[0],s=e[1]/100,o=e[2]/100,a=Math.max(o,.01);return n=(2-s)*o,r=s*a,[i,100*(r=(r/=(t=(2-s)*a)<=1?t:2-t)||0),100*(n/=2)]},n.hwb.rgb=function(e){var t,r,n,i,s,o,a,l=e[0]/360,u=e[1]/100,c=e[2]/100,h=u+c;switch(h>1&&(u/=h,c/=h),n=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(n=1-n),i=u+n*((r=1-c)-u),t){default:case 6:case 0:s=r,o=i,a=u;break;case 1:s=i,o=r,a=u;break;case 2:s=u,o=r,a=i;break;case 3:s=u,o=i,a=r;break;case 4:s=i,o=u,a=r;break;case 5:s=r,o=u,a=i}return[255*s,255*o,255*a]},n.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},n.xyz.rgb=function(e){var t,r,n,i=e[0]/100,s=e[1]/100,o=e[2]/100;return r=-.9689*i+1.8758*s+.0415*o,n=.0557*i+-.204*s+1.057*o,t=(t=3.2406*i+-1.5372*s+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},n.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},n.lab.xyz=function(e){var t,r,n,i=e[0];t=e[1]/500+(r=(i+16)/116),n=r-e[2]/200;var s=Math.pow(r,3),o=Math.pow(t,3),a=Math.pow(n,3);return r=s>.008856?s:(r-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,[t*=95.047,r*=100,n*=108.883]},n.lab.lch=function(e){var t,r=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+i*i),t]},n.lch.lab=function(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]},n.rgb.ansi16=function(e){var t=e[0],r=e[1],i=e[2],s=1 in arguments?arguments[1]:n.rgb.hsv(e)[2];if(0===(s=Math.round(s/50)))return 30;var o=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return 2===s&&(o+=60),o},n.hsv.ansi16=function(e){return n.rgb.ansi16(n.hsv.rgb(e),e[2])},n.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},n.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},n.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var r;return e-=16,[Math.floor(e/36)/5*255,Math.floor((r=e%36)/6)/5*255,r%6/5*255]},n.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},n.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];3===t[0].length&&(r=r.split("").map((function(e){return e+e})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},n.rgb.hcg=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255,s=Math.max(Math.max(r,n),i),o=Math.min(Math.min(r,n),i),a=s-o;return t=a<=0?0:s===r?(n-i)/a%6:s===n?2+(i-r)/a:4+(r-n)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?o/(1-a):0)]},n.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,i=0;return(n=r<.5?2*t*r:2*t*(1-r))<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},n.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},n.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var i,s=[0,0,0],o=t%1*6,a=o%1,l=1-a;switch(Math.floor(o)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=l,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=l,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=l}return i=(1-r)*n,[255*(r*s[0]+i),255*(r*s[1]+i),255*(r*s[2]+i)]},n.hcg.hsv=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},n.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},n.hcg.hwb=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},n.hwb.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},n.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},n.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},n.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},n.gray.hsl=n.gray.hsv=function(e){return[0,0,e[0]]},n.gray.hwb=function(e){return[0,100,e[0]]},n.gray.cmyk=function(e){return[0,0,0,e[0]]},n.gray.lab=function(e){return[e[0],0,0]},n.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},n.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}})));Ga.rgb,Ga.hsl,Ga.hsv,Ga.hwb,Ga.cmyk,Ga.xyz,Ga.lab,Ga.lch,Ga.hex,Ga.keyword,Ga.ansi16,Ga.ansi256,Ga.hcg,Ga.apple,Ga.gray;function Ha(e){var t=function(){for(var e={},t=Object.keys(Ga),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),i=Object.keys(Ga[n]),s=i.length,o=0;o<s;o++){var a=i[o],l=t[a];-1===l.distance&&(l.distance=t[n].distance+1,l.parent=n,r.unshift(a))}return t}function Va(e,t){return function(r){return t(e(r))}}function Ya(e,t){for(var r=[t[e].parent,e],n=Ga[t[e].parent][e],i=t[e].parent;t[i].parent;)r.unshift(t[i].parent),n=Va(Ga[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}var Ka={};Object.keys(Ga).forEach((function(e){Ka[e]={},Object.defineProperty(Ka[e],"channels",{value:Ga[e].channels}),Object.defineProperty(Ka[e],"labels",{value:Ga[e].labels});var t=function(e){for(var t=Ha(e),r={},n=Object.keys(t),i=n.length,s=0;s<i;s++){var o=n[s];null!==t[o].parent&&(r[o]=Ya(o,t))}return r}(e);Object.keys(t).forEach((function(r){var n=t[r];Ka[e][r]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var r=e(t);if("object"==typeof r)for(var n=r.length,i=0;i<n;i++)r[i]=Math.round(r[i]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(n),Ka[e][r].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)}))}));var Ja=Ka,Xa=[].slice,Za=["keyword","gray","hex"],el={};Object.keys(Ja).forEach((function(e){el[Xa.call(Ja[e].labels).sort().join("")]=e}));var tl={};function rl(e,t){if(!(this instanceof rl))return new rl(e,t);if(t&&t in Za&&(t=null),t&&!(t in Ja))throw new Error("Unknown model: "+t);var r,n;if(e)if(e instanceof rl)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var i=za.get(e);if(null===i)throw new Error("Unable to parse color from string: "+e);this.model=i.model,n=Ja[this.model].channels,this.color=i.value.slice(0,n),this.valpha="number"==typeof i.value[n]?i.value[n]:1}else if(e.length){this.model=t||"rgb",n=Ja[this.model].channels;var s=Xa.call(e,0,n);this.color=ol(s,n),this.valpha="number"==typeof e[n]?e[n]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var o=Object.keys(e);"alpha"in e&&(o.splice(o.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var a=o.sort().join("");if(!(a in el))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=el[a];var l=Ja[this.model].labels,u=[];for(r=0;r<l.length;r++)u.push(e[l[r]]);this.color=ol(u)}else this.model="rgb",this.color=[0,0,0],this.valpha=1;if(tl[this.model])for(n=Ja[this.model].channels,r=0;r<n;r++){var c=tl[this.model][r];c&&(this.color[r]=c(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function nl(e,t,r){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(tl[e]||(tl[e]=[]))[t]=r})),e=e[0],function(n){var i;return arguments.length?(r&&(n=r(n)),(i=this[e]()).color[t]=n,i):(i=this[e]().color[t],r&&(i=r(i)),i)}}function il(e){return function(t){return Math.max(0,Math.min(e,t))}}function sl(e){return Array.isArray(e)?e:[e]}function ol(e,t){for(var r=0;r<t;r++)"number"!=typeof e[r]&&(e[r]=0);return e}rl.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in za.to?this:this.rgb(),r=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return za.to[t.model](r)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),r=1===t.valpha?t.color:t.color.concat(this.valpha);return za.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=Ja[this.model].channels,r=Ja[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new rl(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new rl(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:nl("rgb",0,il(255)),green:nl("rgb",1,il(255)),blue:nl("rgb",2,il(255)),hue:nl(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:nl("hsl",1,il(100)),lightness:nl("hsl",2,il(100)),saturationv:nl("hsv",1,il(100)),value:nl("hsv",2,il(100)),chroma:nl("hcg",1,il(100)),gray:nl("hcg",2,il(100)),white:nl("hwb",1,il(100)),wblack:nl("hwb",2,il(100)),cyan:nl("cmyk",0,il(100)),magenta:nl("cmyk",1,il(100)),yellow:nl("cmyk",2,il(100)),black:nl("cmyk",3,il(100)),x:nl("xyz",0,il(100)),y:nl("xyz",1,il(100)),z:nl("xyz",2,il(100)),l:nl("lab",0,il(100)),a:nl("lab",1),b:nl("lab",2),keyword:function(e){return arguments.length?new rl(e):Ja[this.model].keyword(this.color)},hex:function(e){return arguments.length?new rl(e):za.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return rl.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r=(r+e)%360)<0?360+r:r,t.color[0]=r,t},mix:function(e,t){var r=e.rgb(),n=this.rgb(),i=void 0===t?.5:t,s=2*i-1,o=r.alpha()-n.alpha(),a=((s*o==-1?s:(s+o)/(1+s*o))+1)/2,l=1-a;return rl.rgb(a*r.red()+l*n.red(),a*r.green()+l*n.green(),a*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}},Object.keys(Ja).forEach((function(e){if(-1===Za.indexOf(e)){var t=Ja[e].channels;rl.prototype[e]=function(){if(this.model===e)return new rl(this);if(arguments.length)return new rl(arguments,e);var r="number"==typeof arguments[t]?t:this.valpha;return new rl(sl(Ja[this.model][e].raw(this.color)).concat(r),e)},rl[e]=function(r){return"number"==typeof r&&(r=ol(Xa.call(arguments),t)),new rl(r,e)}}}));var al=rl,ll=function(e){for(var t=0,r=0;t<e.length;r=e.charCodeAt(t++)+((r<<5)-r));var n=Math.floor(Math.abs(1e4*Math.sin(r)%1*16777216)).toString(16);return"#"+Array(6-n.length+1).join("0")+n};function ul(e,t){return t?new ul(e).style(t):this instanceof ul?void(this.text=e):new ul(e)}ul.prototype.prefix="[",ul.prototype.suffix="m",ul.prototype.hex=function(e){3===(e="#"===e[0]?e.substring(1):e).length&&((e=e.split(""))[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var t=e.substring(0,2),r=e.substring(2,4),n=e.substring(4,6);return[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},ul.prototype.rgb=function(e,t,r){var n=e/255*5,i=t/255*5,s=r/255*5;return this.ansi(n,i,s)},ul.prototype.ansi=function(e,t,r){return 16+36*Math.round(e)+6*Math.round(t)+Math.round(r)},ul.prototype.reset=function(){return this.prefix+"39;49"+this.suffix},ul.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};var cl,hl=ul,fl=(cl=function(){return process.env.DEBUG||process.env.DIAGNOSTICS},function(e){try{return function(e,t){if(!t)return!1;for(var r=t.split(/[\s,]+/),n=0;n<r.length;n++)if("-"!==(t=r[n].replace("*",".*?")).charAt(0)){if(new RegExp("^"+t+"$").test(e))return!0}else if(new RegExp("^"+t.substr(1)+"$").test(e))return!1;return!1}(e,cl())}catch(e){}return!1}),dl=b.isatty(1),pl=Qa((function e(t,r){return(r=r||{}).colors="colors"in r?r.colors:dl,r.namespace=t,r.prod=!1,r.dev=!0,e.enabled(t)||r.force||e.force?e.yep(r):e.nope(r)}));pl.modify((function(e,t){var r=t.namespace,n=!1!==t.colors?hl(r+":",function(e,t){var r=e.split(t||":"),n=ll(r[0]);if(!r.length)return n;for(var i=0,s=r.length-1;i<s;i++)n=al(n).mix(al(ll(r[i+1]))).saturate(1).hex();return n}(r)):r+":";return e[0]=n+" "+e[0],e})),pl.use(fl),pl.set((function(e,t){try{Function.prototype.apply.call(console.log,console,t)}catch(e){}}));var gl=S((function(e){e.exports=Ua}));const{StringDecoder:ml}=a,{Stream:bl}=Oa;function yl(){}const{MESSAGE:vl}=wr,{Stream:wl,PassThrough:_l}=Oa,Sl=gl("winston:file");var El=class extends vi{constructor(e={}){function t(t,...r){r.slice(1).forEach(r=>{if(e[r])throw new Error(`Cannot set ${r} and ${t} together`)})}if(super(e),this.name=e.name||"file",this._stream=new _l,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)t("filename or dirname","stream"),this._basename=this.filename=e.filename?i.basename(e.filename):"winston.log",this.dirname=e.dirname||i.dirname(e.filename),this.options=e.options||{flags:"a"};else{if(!e.stream)throw new Error("Cannot log to file without filename or stream.");console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),t("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=i.dirname(this._dest.path)}this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=e.eol||p.EOL,this.tailable=e.tailable||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,t=(()=>{})){if(this.silent)return t(),!0;if(this._drain)return void this._stream.once("drain",()=>{this._drain=!1,this.log(e,t)});if(this._rotate)return void this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,t)});const r=`${e[vl]}${this.eol}`,n=Buffer.byteLength(r);this._pendingSize+=n,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);const i=this._stream.write(r,function(){this._size+=n,this._pendingSize-=n,Sl("logged %s %s",this._size,r),this.emit("logged",e),this._opening||this._needsNewFile()&&(this._rotate=!0,this._endStream(()=>this._rotateFile()))}.bind(this));return i?t():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,t()})),Sl("written",i,this._drain),this.finishIfEnding(),i}query(e,t){"function"==typeof e&&(t=e,e={}),e=function(e){(e=e||{}).rows=e.rows||e.limit||10,e.start=e.start||0,e.until=e.until||new Date,"object"!=typeof e.until&&(e.until=new Date(e.until));e.from=e.from||e.until-864e5,"object"!=typeof e.from&&(e.from=new Date(e.from));return e.order=e.order||"desc",e}(e);const r=i.join(this.dirname,this.filename);let n="",o=[],a=0;const l=s.createReadStream(r,{encoding:"utf8"});function u(t,r){try{const r=JSON.parse(t);(function(t){if(!t)return;if("object"!=typeof t)return;const r=new Date(t.timestamp);if(e.from&&r<e.from||e.until&&r>e.until||e.level&&e.level!==t.level)return;return!0})(r)&&function(t){if(e.rows&&o.length>=e.rows&&"desc"!==e.order)return void(l.readable&&l.destroy());e.fields&&(t=e.fields.reduce((e,r)=>(e[r]=t[r],e),{}));"desc"===e.order&&o.length>=e.rows&&o.shift();o.push(t)}(r)}catch(e){r||l.emit("error",e)}}l.on("error",e=>{if(l.readable&&l.destroy(),t)return"ENOENT"!==e.code?t(e):t(null,o)}),l.on("data",t=>{const r=(t=(n+t).split(/\n+/)).length-1;let i=0;for(;i<r;i++)(!e.start||a>=e.start)&&u(t[i]),a++;n=t[r]}),l.on("close",()=>{n&&u(n,!0),"desc"===e.order&&(o=o.reverse()),t&&t(null,o)})}stream(e={}){const t=i.join(this.dirname,this.filename),r=new wl,n={file:t,start:e.start};return r.destroy=((e,t)=>{const r=Buffer.alloc(65536),n=new ml("utf8"),i=new bl;let o="",a=0,l=0;return-1===e.start&&delete e.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},s.open(e.file,"a+","0644",(u,c)=>{if(u)return t?t(u):i.emit("error",u),void i.destroy();!function u(){if(!i.destroyed)return s.read(c,r,0,r.length,a,(s,c)=>{if(s)return t?t(s):i.emit("error",s),void i.destroy();if(!c)return o&&((null==e.start||l>e.start)&&(t?t(null,o):i.emit("line",o)),l++,o=""),setTimeout(u,1e3);let h=n.write(r.slice(0,c));t||i.emit("data",h),h=(o+h).split(/\n+/);const f=h.length-1;let d=0;for(;d<f;d++)(null==e.start||l>e.start)&&(t?t(null,h[d]):i.emit("line",h[d])),l++;return o=h[f],a+=c,u()});s.close(c,yl)}()}),t?i.destroy:i})(n,(e,t)=>{if(e)return r.emit("error",e);try{r.emit("data",t),t=JSON.parse(t),r.emit("log",t)}catch(e){r.emit("error",e)}}),r}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,t)=>{if(e)return this.emit("error",e);Sl("stat done: %s { size: %s }",this.filename,t),this._size=t,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.eventNames().includes("rotate")?this._stream.emit("rotate"):this._rotate=!1})})))}stat(e){const t=this._getFile(),r=i.join(this.dirname,t);s.stat(r,(n,i)=>n&&"ENOENT"===n.code?(Sl("ENOENTok",r),this.filename=t,e(null,0)):n?(Sl(`err ${n.code} ${r}`),e(n)):!i||this._needsNewFile(i.size)?this._incFile(()=>this.stat(e)):(this.filename=t,void e(null,i.size)))}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=(()=>{})){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){const t=i.join(this.dirname,this.filename);Sl("create stream start",t,this.options);const r=s.createWriteStream(t,this.options).on("error",e=>Sl(e)).on("close",()=>Sl("close",r.path,r.bytesWritten)).on("open",()=>{Sl("file open ok",t),this.emit("open",t),e.pipe(r),this.rotatedWhileOpening&&(this._stream=new _l,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(r),e.end())});if(Sl("create stream ok",t),this.zippedArchive){const e=m.createGzip();return e.pipe(r),e}return r}_incFile(e){Sl("_incFile",this.filename);const t=i.extname(this._basename),r=i.basename(this._basename,t);this.tailable?this._checkMaxFilesTailable(t,r,e):(this._created+=1,this._checkMaxFilesIncrementing(t,r,e))}_getFile(){const e=i.extname(this._basename),t=i.basename(this._basename,e),r=this.rotationFormat?this.rotationFormat():this._created,n=!this.tailable&&this._created?`${t}${r}${e}`:`${t}${e}`;return this.zippedArchive&&!this.tailable?n+".gz":n}_checkMaxFilesIncrementing(e,t,r){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(r);const n=this._created-this.maxFiles,o=`${t}${0!==n?n:""}${e}${this.zippedArchive?".gz":""}`,a=i.join(this.dirname,o);s.unlink(a,r)}_checkMaxFilesTailable(e,t,r){const n=[];if(!this.maxFiles)return;const o=this.zippedArchive?".gz":"";for(let r=this.maxFiles-1;r>1;r--)n.push(function(r,n){let a=`${t}${r-1}${e}${o}`;const l=i.join(this.dirname,a);s.exists(l,u=>{if(!u)return n(null);a=`${t}${r}${e}${o}`,s.rename(l,i.join(this.dirname,a),n)})}.bind(this,r));Bi(n,()=>{s.rename(i.join(this.dirname,`${t}${e}`),i.join(this.dirname,`${t}1${e}${o}`),r)})}_createLogDirIfNotExist(e){s.existsSync(e)||s.mkdirSync(e,{recursive:!0})}};const{Stream:Ml}=Oa;var xl=class extends vi{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.port||(this.port=this.ssl?443:80)}log(e,t){this._request(e,(t,r)=>{r&&200!==r.statusCode&&(t=new Error("Invalid HTTP Status Code: "+r.statusCode)),t?this.emit("warn",t):this.emit("logged",e)}),t&&setImmediate(t)}query(e,t){"function"==typeof e&&(t=e,e={}),(e={method:"query",params:this.normalizeQuery(e)}).params.path&&(e.path=e.params.path,delete e.params.path),e.params.auth&&(e.auth=e.params.auth,delete e.params.auth),this._request(e,(e,r,n)=>{if(r&&200!==r.statusCode&&(e=new Error("Invalid HTTP Status Code: "+r.statusCode)),e)return t(e);if("string"==typeof n)try{n=JSON.parse(n)}catch(e){return t(e)}t(null,n)})}stream(e={}){const t=new Ml;(e={method:"stream",params:e}).params.path&&(e.path=e.params.path,delete e.params.path),e.params.auth&&(e.auth=e.params.auth,delete e.params.auth);let r="";const n=this._request(e);return t.destroy=()=>n.destroy(),n.on("data",e=>{const n=(e=(r+e).split(/\n+/)).length-1;let i=0;for(;i<n;i++)try{t.emit("log",JSON.parse(e[i]))}catch(e){t.emit("error",e)}r=e[n]}),n.on("error",e=>t.emit("error",e)),t}_request(e,t){const r=(e=e||{}).auth||this.auth,n=e.path||this.path||"";delete e.auth,delete e.path;const i=Object.assign({},this.headers);r&&r.bearer&&(i.Authorization="Bearer "+r.bearer);const s=(this.ssl?v:y).request({...this.options,method:"POST",host:this.host,port:this.port,path:"/"+n.replace(/^\//,""),headers:i,auth:r&&r.username&&r.password?`${r.username}:${r.password}`:"",agent:this.agent});s.on("error",t),s.on("response",e=>e.on("end",()=>t(null,e)).resume()),s.end(Buffer.from(JSON.stringify(e),"utf8"))}};const kl=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;kl.writable=e=>kl(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,kl.readable=e=>kl(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,kl.duplex=e=>kl.writable(e)&&kl.readable(e),kl.transform=e=>kl.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState;var Rl=kl;const{MESSAGE:Ol}=wr;var Cl=class extends vi{constructor(e={}){if(super(e),!e.stream||!Rl(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=e.eol||p.EOL}log(e,t){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode)return this._stream.write(e),void(t&&t());this._stream.write(`${e[Ol]}${this.eol}`),t&&t()}},Tl=S((function(e,t){Object.defineProperty(t,"Console",{configurable:!0,enumerable:!0,get:()=>Si}),Object.defineProperty(t,"File",{configurable:!0,enumerable:!0,get:()=>El}),Object.defineProperty(t,"Http",{configurable:!0,enumerable:!0,get:()=>xl}),Object.defineProperty(t,"Stream",{configurable:!0,enumerable:!0,get:()=>Cl})}));const{configs:Pl}=wr;var jl={cli:Mr.levels(Pl.cli),npm:Mr.levels(Pl.npm),syslog:Mr.levels(Pl.syslog),addColors:Mr.levels},Al=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(Ei),n=u(Ii),i=u(Di),s=u(Ti),o=u(Ai),a=u(Ri),l=u(Oi);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){r=(0,s.default)(r);var i=0,a=0,{length:l}=e,u=!1;function c(e,t){!1===e&&(u=!0),!0!==u&&(e?r(e):++a!==l&&t!==n.default||r(null))}for(0===l&&r(null);i<l;i++)t(e[i],i,(0,o.default)(c))}function h(e,t,r){return(0,i.default)(e,1/0,t,r)}t.default=(0,l.default)((function(e,t,n){return((0,r.default)(e)?c:h)(e,(0,a.default)(t),n)}),3),e.exports=t.default}));_(Al);var Il=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(t,r,n)=>e(t,n)},e.exports=t.default}));_(Il);var Nl=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(Al),n=o(Il),i=o(Ri),s=o(Oi);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,s.default)((function(e,t,s){return(0,r.default)(e,(0,n.default)((0,i.default)(t)),s)}),3),e.exports=t.default}));_(Nl);var Ll=Object.prototype.toString,Dl=function(e){var t,r=0;function n(){return r||(r=1,t=e.apply(this,arguments),e=null),t}return n.displayName=function(e){if("string"==typeof e.displayName&&e.constructor.name)return e.displayName;if("string"==typeof e.name&&e.name)return e.name;if("object"==typeof e&&e.constructor&&"string"==typeof e.constructor.name)return e.constructor.name;var t=e.toString(),r=Ll.call(e).slice(8,-1);return(t="Function"===r?t.substring(t.indexOf("(")+1,t.indexOf(")")):r)||"anonymous"}(e),n},ql=S((function(e,t){function r(e){for(var t in e)this[t]=e[t]}t.get=function(e){var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var n={},i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.captureStackTrace(n,e||t.get);var s=n.stack;return Error.prepareStackTrace=i,Error.stackTraceLimit=r,s},t.parse=function(e){if(!e.stack)return[];var t=this;return e.stack.split("\n").slice(1).map((function(e){if(e.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var r=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(r){var n=null,i=null,s=null,o=null,a=null,l="native"===r[5];if(r[1]){var u=(s=r[1]).lastIndexOf(".");if("."==s[u-1]&&u--,u>0){n=s.substr(0,u),i=s.substr(u+1);var c=n.indexOf(".Module");c>0&&(s=s.substr(c+1),n=n.substr(0,c))}o=null}i&&(o=n,a=i),"<anonymous>"===i&&(a=null,s=null);var h={fileName:r[2]||null,lineNumber:parseInt(r[3],10)||null,functionName:s,typeName:o,methodName:a,columnNumber:parseInt(r[4],10)||null,native:l};return t._createParsedCallSite(h)}})).filter((function(e){return!!e}))};["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach((function(e){r.prototype[e]=null,r.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),["topLevel","eval","native","constructor"].forEach((function(e){r.prototype[e]=!1,r.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),t._createParsedCallSite=function(e){return new r(e)}}));ql.get,ql.parse,ql._createParsedCallSite;const{Writable:Bl}=Oa;var Fl=class extends Bl{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,t,r){return e.exception?this.transport.log(e,r):(r(),!0)}};const Ql=gl("winston:exception");var Ul=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(e=>{if(Array.isArray(e))return e.forEach(e=>this._addHandler(e));this._addHandler(e)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let{message:t}=e;return t||"string"!=typeof e||(t=e),{error:e,level:"error",message:["uncaughtException: "+(t||"(no error message)"),e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:p.loadavg(),uptime:p.uptime()}}getTrace(e){return(e?ql.parse(e):ql.get()).map(e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;const t=new Fl(e);this.handlers.set(e,t),this.logger.pipe(t)}}_uncaughtException(e){const t=this.getAllInfo(e),r=this._getExceptionHandlers();let n,i="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function s(){Ql("doExit",i),Ql("process._exiting",process._exiting),i&&!process._exiting&&(n&&clearTimeout(n),process.exit(1))}if(!r.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1),!r||0===r.length)return process.nextTick(s);Nl(r,(e,t)=>{const r=Dl(t),n=e.transport||e;function i(e){return()=>{Ql(e),r()}}n._ending=!0,n.once("finish",i("finished")),n.once("error",i("error"))},()=>i&&s()),this.logger.log(t),i&&(n=setTimeout(s,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}};const $l=gl("winston:rejection");var Wl=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(e=>{if(Array.isArray(e))return e.forEach(e=>this._addHandler(e));this._addHandler(e)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let{message:t}=e;return t||"string"!=typeof e||(t=e),{error:e,level:"error",message:["unhandledRejection: "+(t||"(no error message)"),e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:p.loadavg(),uptime:p.uptime()}}getTrace(e){return(e?ql.parse(e):ql.get()).map(e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;const t=new Fl(e);this.handlers.set(e,t),this.logger.pipe(t)}}_unhandledRejection(e){const t=this.getAllInfo(e),r=this._getRejectionHandlers();let n,i="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function s(){$l("doExit",i),$l("process._exiting",process._exiting),i&&!process._exiting&&(n&&clearTimeout(n),process.exit(1))}if(!r.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1),!r||0===r.length)return process.nextTick(s);Nl(r,(e,t)=>{const r=Dl(t),n=e.transport||e;function i(e){return()=>{$l(e),r()}}n._ending=!0,n.once("finish",i("finished")),n.once("error",i("error"))},()=>i&&s()),this.logger.log(t),i&&(n=setTimeout(s,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}},zl=Vl;Vl.default=Vl,Vl.stable=Kl,Vl.stableStringify=Kl;var Gl=[],Hl=[];function Vl(e,t,r){var n;for(!function e(t,r,n,i){var s;if("object"==typeof t&&null!==t){for(s=0;s<n.length;s++)if(n[s]===t){var o=Object.getOwnPropertyDescriptor(i,r);return void(void 0!==o.get?o.configurable?(Object.defineProperty(i,r,{value:"[Circular]"}),Gl.push([i,r,t,o])):Hl.push([t,r]):(i[r]="[Circular]",Gl.push([i,r,t])))}if(n.push(t),Array.isArray(t))for(s=0;s<t.length;s++)e(t[s],s,n,t);else{var a=Object.keys(t);for(s=0;s<a.length;s++){var l=a[s];e(t[l],l,n,t)}}n.pop()}}(e,"",[],void 0),n=0===Hl.length?JSON.stringify(e,t,r):JSON.stringify(e,Jl(t),r);0!==Gl.length;){var i=Gl.pop();4===i.length?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}return n}function Yl(e,t){return e<t?-1:e>t?1:0}function Kl(e,t,r){var n,i=function e(t,r,n,i){var s;if("object"==typeof t&&null!==t){for(s=0;s<n.length;s++)if(n[s]===t){var o=Object.getOwnPropertyDescriptor(i,r);return void(void 0!==o.get?o.configurable?(Object.defineProperty(i,r,{value:"[Circular]"}),Gl.push([i,r,t,o])):Hl.push([t,r]):(i[r]="[Circular]",Gl.push([i,r,t])))}if("function"==typeof t.toJSON)return;if(n.push(t),Array.isArray(t))for(s=0;s<t.length;s++)e(t[s],s,n,t);else{var a={},l=Object.keys(t).sort(Yl);for(s=0;s<l.length;s++){var u=l[s];e(t[u],u,n,t),a[u]=t[u]}if(void 0===i)return a;Gl.push([i,r,t]),i[r]=a}n.pop()}}(e,"",[],void 0)||e;for(n=0===Hl.length?JSON.stringify(i,t,r):JSON.stringify(i,Jl(t),r);0!==Gl.length;){var s=Gl.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}return n}function Jl(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(Hl.length>0)for(var n=0;n<Hl.length;n++){var i=Hl[n];if(i[1]===t&&i[0]===r){r="[Circular]",Hl.splice(n,1);break}}return e.call(this,t,r)}}const{MESSAGE:Xl}=wr;function Zl(e,t){return t instanceof Buffer?t.toString("base64"):"bigint"==typeof t?t.toString():t}var eu=tr((e,t={})=>(e[Xl]=(t.stable?zl.stableStringify:zl)(e,t.replacer||Zl,t.space),e));const{Stream:tu,Transform:ru}=Oa,{LEVEL:nu,SPLAT:iu}=wr,{warn:su}=xr,ou=/%[scdjifoO%]/g;class au extends ru{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){const t=this;return Object.create(t,{write:{value:function(r){const n=Object.assign({},e,r);r instanceof Error&&(n.stack=r.stack,n.message=r.message),t.write(n)}}})}configure({silent:e,format:t,defaultMeta:r,levels:n,level:i="info",exitOnError:s=!0,transports:o,colors:a,emitErrs:l,formatters:u,padLevels:c,rewriters:h,stripColors:f,exceptionHandlers:d,rejectionHandlers:p}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=t||this.format||eu(),this.defaultMeta=r||null,this.levels=n||this.levels||jl.npm.levels,this.level=i,this.exceptions=new Ul(this),this.rejections=new Wl(this),this.profilers={},this.exitOnError=s,o&&(o=Array.isArray(o)?o:[o]).forEach(e=>this.add(e)),a||l||u||c||h||f)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"));d&&this.exceptions.handle(d),p&&this.rejections.handle(p)}isLevelEnabled(e){const t=lu(this.levels,e);if(null===t)return!1;const r=lu(this.levels,this.level);if(null===r)return!1;if(!this.transports||0===this.transports.length)return r>=t;return-1!==this.transports.findIndex(e=>{let n=lu(this.levels,e.level);return null===n&&(n=r),n>=t})}log(e,t,...r){if(1===arguments.length)return e[nu]=e.level,this._addDefaultMeta(e),this.write(e),this;if(2===arguments.length)return t&&"object"==typeof t?(t[nu]=t.level=e,this._addDefaultMeta(t),this.write(t),this):(this.write({[nu]:e,level:e,message:t}),this);const[n]=r;if("object"==typeof n&&null!==n){if(!(t&&t.match&&t.match(ou))){const i=Object.assign({},this.defaultMeta,n,{[nu]:e,[iu]:r,level:e,message:t});return n.message&&(i.message=`${i.message} ${n.message}`),n.stack&&(i.stack=n.stack),this.write(i),this}}return this.write(Object.assign({},this.defaultMeta,{[nu]:e,[iu]:r,level:e,message:t})),this}_transform(e,t,r){if(this.silent)return r();e[nu]||(e[nu]=e.level),this.levels[e[nu]]||0===this.levels[e[nu]]||console.error("[winston] Unknown logger level: %s",e[nu]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports %j",e);try{this.push(this.format.transform(e,this.format.options))}catch(e){throw e}finally{r()}}_final(e){const t=this.transports.slice();Nl(t,(e,t)=>{if(!e||e.finished)return setImmediate(t);e.once("finish",t),e.end()},e)}add(e){const t=!Rl(e)||e.log.length>2?new yi({transport:e}):e;if(!t._writableState||!t._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",t),this._onEvent("warn",t),this.pipe(t),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let t=e;return(!Rl(e)||e.log.length>2)&&(t=this.transports.filter(t=>t.transport===e)[0]),t&&this.unpipe(t),this}clear(){return this.unpipe(),this}close(){return this.clear(),this.emit("close"),this}setLevels(){su.deprecated("setLevels")}query(e,t){"function"==typeof e&&(t=e,e={}),e=e||{};const r={},n=Object.assign({},e.query||{});Nl(this.transports.filter(e=>!!e.query),(function(t,i){!function(t,r){e.query&&"function"==typeof t.formatQuery&&(e.query=t.formatQuery(n)),t.query(e,(n,i)=>{if(n)return r(n);"function"==typeof t.formatResults&&(i=t.formatResults(i,e.format)),r(null,i)})}(t,(e,n)=>{i&&((n=e||n)&&(r[t.name]=n),i()),i=null})}),()=>t(null,r))}stream(e={}){const t=new tu,r=[];return t._streams=r,t.destroy=()=>{let e=r.length;for(;e--;)r[e].destroy()},this.transports.filter(e=>!!e.stream).forEach(n=>{const i=n.stream(e);i&&(r.push(i),i.on("log",e=>{e.transport=e.transport||[],e.transport.push(n.name),t.emit("log",e)}),i.on("error",e=>{e.transport=e.transport||[],e.transport.push(n.name),t.emit("error",e)}))}),t}startTimer(){return new class{constructor(e){if(!e)throw new Error("Logger is required for profiling.");this.logger=e,this.start=Date.now()}done(...e){"function"==typeof e[e.length-1]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());const t="object"==typeof e[e.length-1]?e.pop():{};return t.level=t.level||"info",t.durationMs=Date.now()-this.start,this.logger.write(t)}}(this)}profile(e,...t){const r=Date.now();if(this.profilers[e]){const n=this.profilers[e];delete this.profilers[e],"function"==typeof t[t.length-2]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),t.pop());const i="object"==typeof t[t.length-1]?t.pop():{};return i.level=i.level||"info",i.durationMs=r-n,i.message=i.message||e,this.write(i)}return this.profilers[e]=r,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"))}_onEvent(e,t){t["__winston"+e]||(t["__winston"+e]=function(r){"error"!==e||this.transports.includes(t)||this.add(t),this.emit(e,r,t)}.bind(this),t.on(e,t["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}}function lu(e,t){const r=e[t];return r||0===r?r:null}Object.defineProperty(au.prototype,"transports",{configurable:!1,enumerable:!0,get(){const{pipes:e}=this._readableState;return Array.isArray(e)?e:[e].filter(Boolean)}});var uu=au;const{LEVEL:cu}=wr,hu=gl("winston:create-logger");var fu=function(e={}){e.levels=e.levels||jl.npm.levels;class t extends uu{constructor(e){super(e)}}const r=new t(e);return Object.keys(e.levels).forEach((function(e){hu('Define prototype method for "%s"',e),"log"!==e?(t.prototype[e]=function(...t){const n=this||r;if(1===t.length){const[i]=t,s=i&&i.message&&i||{message:i};return s.level=s[cu]=e,n._addDefaultMeta(s),n.write(s),this||r}return 0===t.length?(n.log(e,""),n):n.log(e,...t)},t.prototype[function(e){return"is"+e.charAt(0).toUpperCase()+e.slice(1)+"Enabled"}(e)]=function(){return(this||r).isLevelEnabled(e)}):console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.')})),r},du=E(Wr),pu=(S((function(e,t){const{warn:r}=xr,n=t;n.version=du.version,n.transports=Tl,n.config=jl,n.addColors=Mr.levels,n.format=Mr.format,n.createLogger=fu,n.ExceptionHandler=Ul,n.RejectionHandler=Wl,n.Container=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,t){if(!this.loggers.has(e)){const r=(t=Object.assign({},t||this.options)).transports||this.options.transports;t.transports=r?r.slice():[];const n=fu(t);n.on("close",()=>this._delete(e)),this.loggers.set(e,n)}return this.loggers.get(e)}get(e,t){return this.add(e,t)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((e,t)=>this._removeLogger(t))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}},n.Transport=vi,n.loggers=new n.Container;const i=n.createLogger();Object.keys(n.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(e=>n[e]=(...t)=>i[e](...t)),Object.defineProperty(n,"level",{get:()=>i.level,set(e){i.level=e}}),Object.defineProperty(n,"exceptions",{get:()=>i.exceptions}),["exitOnError"].forEach(e=>{Object.defineProperty(n,e,{get:()=>i[e],set(t){i[e]=t}})}),Object.defineProperty(n,"default",{get:()=>({exceptionHandlers:i.exceptionHandlers,rejectionHandlers:i.rejectionHandlers,transports:i.transports})}),r.deprecated(n,"setLevels"),r.forFunctions(n,"useFormat",["cli"]),r.forProperties(n,"useFormat",["padLevels","stripColors"]),r.forFunctions(n,"deprecated",["addRewriter","addFilter","clone","extend"]),r.forProperties(n,"deprecated",["emitErrs","levelLength"]),r.moved(n,"createLogger","Logger")})),(void 0)({level:"info",format:(void 0)((void 0)(),(void 0)(),(void 0)()),defaultMeta:{service:"trendytrend"}}));function gu(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function mu(e){return function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];try{return Promise.resolve(e.apply(this,r))}catch(e){return Promise.reject(e)}}}pu.add(new(void 0)({filename:"error.log",level:"error"})),pu.add(new(void 0)({filename:"all.log"})),pu.exceptions.handle(new(void 0)({filename:"exceptions.log"}));e.PGClient=Zt,e.PGData=function(e){var t=this,r=this;this.getTable=mu((function(e){return gu(t._client.connect(),(function(r){var n=e||t._params.tableName||"industry";n||pu.log("error","cannot find "+n+" or tableName wasn't provided");var i="SELECT * FROM public."+n+" ORDER BY id ASC ";return gu(t._client.query(i),(function(e){return r.release(!0),e}))}))})),this.getTableRandom=mu((function(e,t){return gu(r._client.connect(),(function(n){var i=e||r._params.tableName||"industry";t=t||680,i||pu.log("error","cannot find "+i+" or tableName wasn't provided");var s='SELECT id, "Name", "Key" FROM public.'+i+" order BY RANDOM() LIMIT "+t+" ;";return gu(r._client.query(s),(function(e){return n.release(!0),e}))}))})),this._params=e||{},this._client=new Zt(e).getClient()},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
